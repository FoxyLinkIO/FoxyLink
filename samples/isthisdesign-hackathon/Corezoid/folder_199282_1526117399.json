[{"obj_type":1,"obj_id":415680,"parent_id":199282,"title":"Client find (Найти клиента по номеру телефона)","description":"{\n\t\"TaskId\": \"3366\",\n\t\"Partner\": {\n\t\t\"Guid\": \"d678ea48-1620-11e4-80d4-001e676b0175\",\n\t\t\"VerificationCode\": \"927658\"\n\t}\n}","status":"active","params":[{"name":"PhoneNumber","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"routing_key","type":"string","descr":"Ключ маршрутизации RabbitMQ","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"type","type":"string","descr":"Ключ маршрутизации FoxyLink","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af469b6513aa0242d23c156","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1552,"y":428,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af468c860e3271d23029719","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5af468e2f6c37674c914296d","id":"6e55d88a-367b-47bb-b04e-336473c8c99d"}],"semaphors":[]},"title":"Start","description":"","x":880,"y":88,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af468e2f6c37674c914296d","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"TaskId":"{{root.task_id}}"},"extra_type":{"TaskId":"string"},"err_node_id":"5af469a482ba9606c4d205a6","id":"52d1b7c3-8b2f-4f51-a9a4-535dfaa29a04","chTime":1525967327491},{"id":"7a0836d4-ad74-4626-a9f1-8e614f896c72","type":"go","to_node_id":"5af46b5760e3271d2304221c","chTime":1525967703611}],"semaphors":[]},"title":"Устанавливаем ссылку на текущий процесс","description":"","x":780,"y":172,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af46b7682ba9606c4d321b1","obj_type":0,"condition":{"logics":[{"type":"api_callback","is_sync":true,"id":"2a2a2258-8195-4c01-bfb8-2cf1816621dd","obj_id_path":"TaskId"},{"id":"d811dd86-b388-4550-bea4-568dab55250d","type":"go","to_node_id":"5af469a482ba9606c4d205a6","chTime":1525967763545}],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af469a482ba9606c4d205a6","id":"8603b89a-1482-4663-ac04-82af6aa070e0","chTime":1525967761017}]},"title":"","description":"","x":780,"y":688,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af46b56f6c37674c915b27d","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af46b5760e3271d2304221c","id":"577c6a49-a6ba-4436-84c8-9020c3daa0f1","chTime":1525967703602}]},"title":"","description":"","x":1000,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af46b72513aa0242d24dd8e","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af46b72513aa0242d24dd8b","id":"03ac1bcb-609d-482c-9e93-82577c79aef3"}]},"title":"","description":"","x":1020,"y":520,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af46b72513aa0242d24dd8b","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af46b72513aa0242d24dd8d","extra":{"correlation_id":"{{TaskId}}","payload":"{{payload}}","reply_to":"/api/1/json/callback/5af46b7682ba9606c4d321b1/79f7cd5be8afaeeee35e00a6e9e4165e4b70525e","routing_key":"{{routing_key}}","type":"{{type}}"},"extra_type":{"correlation_id":"string","payload":"string","reply_to":"string","routing_key":"string","type":"string"},"group":"","id":"bf5ea951-66eb-43c2-9b88-432700afa370","conv_id":367561,"convTitle":"RabbitMQ - Send message","user_id":56916},{"id":"2c026835-d4a4-4cda-a719-c1ac731b2d97","type":"go","to_node_id":"5af46b7682ba9606c4d321b1","chTime":1525967781715}],"semaphors":[]},"title":"Послать запрос на проверку номера телефона","description":"","x":780,"y":512,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af46b72513aa0242d24dd8d","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af46b72513aa0242d24dd8e","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"70ff8eba-d85f-4e7c-8994-a35e616eaf04"},{"type":"go_if_const","to_node_id":"5af46b72513aa0242d24dd8e","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"73a20b1a-c47f-46e4-9010-5221691bbbf4"},{"type":"go_if_const","to_node_id":"5af469a482ba9606c4d205a6","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"2d369d5e-90bf-4179-9c96-046e1e3a536f","chTime":1525967822689},{"type":"go_if_const","to_node_id":"5af469a482ba9606c4d205a6","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"4c65a335-dadd-4daf-9cfc-af23d44aa7d1","chTime":1525967824350},{"id":"f5c0ebf7-89d9-4707-acde-63a9c5e20bb1","type":"go","to_node_id":"5af469a482ba9606c4d205a6","chTime":1525967826258}],"semaphors":[]},"title":"","description":"","x":1020,"y":608,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af469a482ba9606c4d205a6","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true","Partner":"{{Partner}}"},"res_data_type":{"success":"string","Partner":"string"},"mode":"key_value","throw_exception":false,"id":"ee238023-429f-4d25-a69d-4f500825bb0d"},{"id":"ceedb225-81a3-40cf-801b-06b4b81888a4","type":"go","to_node_id":"5af469b6513aa0242d23c156","chTime":1525967286436}],"semaphors":[]},"title":"Возвращаемся в родительский процесс","description":"","x":1276,"y":400,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af46b55513aa0242d24cc1c","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af46b56f6c37674c915b27d","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"3080eae0-0ef4-44cc-b219-6d70f3d37a04","chTime":1525967702650},{"type":"go_if_const","to_node_id":"5af469a482ba9606c4d205a6","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"d567b1eb-d8e4-4d91-b2db-fdf4cba3e9b4","chTime":1525967384506},{"id":"8c1f3377-56e5-40ac-a49d-5e63a8118cd7","type":"go","to_node_id":"5af469a482ba9606c4d205a6","chTime":1525967385973}],"semaphors":[]},"title":"","description":"","x":1000,"y":436,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af46b5760e3271d2304221c","obj_type":0,"condition":{"logics":[{"src":"var pn = data.PhoneNumber.replace(/\\D+/g,'');\n\nvar Settings = {};\nSettings.PhoneNumber = pn.substr(pn.length - 10);\nSettings.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Settings = Settings;\ndata.payload = payload;","lang":"js","type":"api_code","err_node_id":"5af46b55513aa0242d24cc1c","id":"633a0168-bcbd-4a18-b107-d8b1fa2173b5","lang":"js","src":"var pn = data.PhoneNumber.replace(/\\D+/g,'');\n\nvar Settings = {};\nSettings.PhoneNumber = pn.substr(pn.length - 10);\nSettings.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Settings = Settings;\ndata.payload = payload;"},{"id":"75c05b5f-bb89-4f2a-91c0-8d9a19fd0a50","type":"go","to_node_id":"5af46b72513aa0242d24dd8b","chTime":1525967850535}],"semaphors":[]},"title":"Создаем тело сообщения","description":"","x":780,"y":356,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":370723,"parent_id":201045,"title":"Bitrix24 - Set credentials","description":"","status":"active","params":[{"name":"client_id","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"client_secret","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"code","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaff9f360e3275612c0c6d1","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaff9f360e3275612c0c6d5","extra":{"corezoid_reference":"bitrix24_credentials"},"extra_type":{"corezoid_reference":"string"},"group":"all","id":"cf6a3081-f302-4a8b-9479-8830249b93c2","conv_id":370761,"user_id":56916},{"id":"d523502d-9565-487a-9d5e-b18cd2a9bdcf","type":"go","to_node_id":"5aafc04bf6c3767dbd9d1609","chTime":1521482321584}],"semaphors":[]},"title":"Update Bitrix24 credentials","description":"","x":228,"y":180,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaff9f360e3275612c0c6d5","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaff9f360e3275612c0c6d6","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"c3838cd5-34a3-4a63-87ac-ea53e371a24e"},{"type":"go_if_const","to_node_id":"5aaff9f360e3275612c0c6d6","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"545b171e-bb1d-4710-8ecf-70a5aa6c2da2"},{"type":"go_if_const","to_node_id":"5aaff9f360e3275612c0c6d8","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"3d75a460-5a99-47a2-930d-084d781910a7"},{"type":"go_if_const","to_node_id":"5aaff9f360e3275612c0c6d8","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"53abd1e4-e4d4-460b-bf04-7288ee9cdc8b"},{"type":"go","to_node_id":"5aaff9f360e3275612c0c6d8","id":"35ac5320-e771-4579-a07a-05df8ad32c89"}],"semaphors":[]},"title":"","description":"","x":480,"y":272,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff9f360e3275612c0c6d6","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaff9f360e3275612c0c6d1","id":"77c9d9aa-c6fc-4258-90d2-44073e7b4f20"}]},"title":"","description":"","x":480,"y":180,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff9f360e3275612c0c6d8","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":616,"y":300,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc04bf6c3767dbd9d160c","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafc04bf6c3767dbd9d160e","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"3d069e10-4380-4090-9428-b238597429a9"},{"type":"go_if_const","to_node_id":"5aafc04bf6c3767dbd9d160e","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"40d437d4-2ced-4556-9afc-abae3dce0d00"},{"type":"go_if_const","to_node_id":"5aafc04bf6c3767dbd9d1611","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"a3757894-1e2b-466a-87a2-2c1964e0ca68"},{"type":"go_if_const","to_node_id":"5aafc04bf6c3767dbd9d1611","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"a1d53be5-ef62-45c3-8435-53d091632b6e"},{"type":"go","to_node_id":"5aafc04bf6c3767dbd9d1611","id":"6f1d3380-9ac8-4de2-a4d4-f7cfce12d1ab"}],"semaphors":[]},"title":"","description":"","x":484,"y":444,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc04bf6c3767dbd9d1609","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aafc04bf6c3767dbd9d160c","extra":{"copy":"no"},"extra_type":{"copy":"string"},"group":"","id":"6764d2e4-b0ac-4a1f-964b-b581ad370b71","conv_id":370708,"user_id":56916,"convTitle":"Bitrix24 - Update token"},{"id":"55f10225-5154-4d57-a2a3-19ae2426f333","type":"go","to_node_id":"5aafbe19f6c3767dbd9aef6b","chTime":1521467608918}],"semaphors":[]},"title":"Update Bitrix24 token","description":"","x":228,"y":360,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc04bf6c3767dbd9d1611","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Update Bitrix24 Token: Other Errors","description":"","x":624,"y":472,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc04bf6c3767dbd9d160e","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafc04bf6c3767dbd9d1609","id":"6dd8729d-4fb4-40d2-bc0e-506292d0fa2d"}]},"title":"","description":"","x":484,"y":360,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafbe19f6c3767dbd9aef67","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aaff9f360e3275612c0c6d1","id":"fcb050e9-bdee-4904-a05b-24e33f8f686c"}],"semaphors":[]},"title":"Start","description":"","x":328,"y":108,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafbe19f6c3767dbd9aef6b","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":328,"y":552,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":370745,"parent_id":201045,"title":"Bitrix24 - Test","description":"","status":"debug","params":null,"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aafda4f82ba963c28a924d1","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1064,"y":252,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafda95f6c3767dbdb64bcc","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafda95f6c3767dbdb64bd1","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"0e6496f5-bd0c-4b0d-8c55-719a070c936e"},{"type":"go_if_const","to_node_id":"5aafda95f6c3767dbdb64bd3","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"2de18acf-bec7-466b-8519-96591967b62e"},{"type":"go_if_const","to_node_id":"5aafda95f6c3767dbdb64bd1","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"65ee17d5-89dd-4405-a4b6-9836210fcfb7"},{"type":"go","to_node_id":"5aafda95f6c3767dbdb64bd3","id":"c53b9f80-a7fa-4a3e-8503-3cc4bbafb776"}],"semaphors":[]},"title":"","description":"","x":1036,"y":408,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafda95f6c3767dbdb64bd3","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1168,"y":436,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafda95f6c3767dbdb64bcb","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aafda95f6c3767dbdb64bcc","format":"","method":"POST","url":"https://ktc.bitrix24.ua/rest/user.get?scope=&auth={{auth}}","extra":{},"extra_type":{},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"8ae20a25-8241-40ef-9a94-ac1f75a6e7bf","is_migrate":true},{"id":"a052aa93-bb8e-4ebe-970e-47a7caed324d","type":"go","to_node_id":"5aafda4360e3275612aa2a03","chTime":1521474190479}],"semaphors":[]},"title":"","description":"","x":784,"y":316,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafda4f82ba963c28a924ce","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"auth":"{{conv[367769].ref[bitrix24_token].access_token}}"},"extra_type":{"auth":"string"},"err_node_id":"5aafda4f82ba963c28a924d1","id":"c4ff563d-2760-4911-b0be-f121c0ea4764"},{"id":"1ff773fa-e779-4c0c-8536-4981eee50775","type":"go","to_node_id":"5aafda95f6c3767dbdb64bcb","chTime":1521474126440}],"semaphors":[]},"title":"","description":"","x":784,"y":176,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafda95f6c3767dbdb64bd1","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafda95f6c3767dbdb64bcb","id":"89e35088-e69f-455f-8643-012f120ee7b2"}]},"title":"","description":"","x":1036,"y":316,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafda4360e3275612aa2a00","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aafda4f82ba963c28a924ce","id":"0843719d-305e-4d62-8736-6e6254433fba"}],"semaphors":[]},"title":"Start","description":"","x":880,"y":100,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafda4360e3275612aa2a03","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":880,"y":512,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":370708,"parent_id":201045,"title":"Bitrix24 - Update token","description":"","status":"active","params":null,"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aafc3c660e3275612956262","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aafc3c660e3275612956264","format":"","method":"GET","url":"https://oauth.bitrix.info/oauth/token/","extra":{"grant_type":"refresh_token","client_id":"{{client_id}}","client_secret":"{{client_secret}}","refresh_token":"{{refresh_token}}"},"extra_type":{"grant_type":"string","client_id":"string","client_secret":"string","refresh_token":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"d623b21c-fc6a-40c7-9409-c674f44777fc","is_migrate":true},{"id":"5eb43e90-5f35-422e-aa80-09c84555beef","type":"go","to_node_id":"5aaff67d513aa028cc3f44ea","chTime":1521481568794}],"semaphors":[]},"title":"Update Token","description":"","x":484,"y":92,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0037e82ba963c28c5c4d5","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"e8b1eb04-cab0-4df4-a21a-4dafd14967fa","exception_reason":"Failed to set refresh_token"},{"id":"a39fbc54-5e37-4cc7-b031-0e7ab8f10c63","type":"go","to_node_id":"5aafc8b2513aa028cc18e399","chTime":1521484659736}],"semaphors":[]},"title":"Failed to set refresh_token","description":"","x":216,"y":-80,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaffd7560e3275612c311dd","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaffd7560e3275612c311de","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"aff91610-1328-4c85-b4b8-ccbbf9555fc8"},{"type":"go_if_const","to_node_id":"5aaffd7560e3275612c311de","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"3e94f116-1f77-48e9-b8b4-ef804b96f90a"},{"type":"go_if_const","to_node_id":"5aaffdbb60e3275612c34049","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"bf6fef2b-7089-4a04-a03d-26d56f8a7c57"},{"type":"go_if_const","to_node_id":"5aaffdbb60e3275612c34049","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"a4ce56b8-f103-4bcd-92fa-fc5cb1236189"},{"type":"go","to_node_id":"5aaffdbb60e3275612c34049","id":"a2f08835-6ede-40f5-a1a3-f6c8ff13a587"}],"semaphors":[]},"title":"","description":"","x":1020,"y":520,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaffd7560e3275612c311df","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1388,"y":460,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaffdbb60e3275612c34049","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"05cb5b3f-2d2d-4403-bf97-3787b845fcee","exception_reason":"Timeout failure"},{"id":"a55f07e5-d9e3-4e36-91f3-d096d1ead818","type":"go","to_node_id":"5aaffd7560e3275612c311df","chTime":1521483200635}],"semaphors":[]},"title":"Timeout failure","description":"","x":1108,"y":432,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaffd7560e3275612c311de","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaffd7560e3275612c311dc","id":"f4a3f06d-00ff-45a2-a15a-793617e799c3"}]},"title":"","description":"","x":1020,"y":432,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaffd7560e3275612c311dc","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaffd7560e3275612c311dd","extra":{"seconds_minus":"100","expires_in":"{{expires_in}}"},"extra_type":{"seconds_minus":"number","expires_in":"number"},"group":"","id":"db3c6d3f-3383-49ef-8161-7a153b58fac7","conv_id":370762,"convTitle":"Timeout","user_id":56916},{"id":"86ad6653-2c8a-4a6f-8fc6-8e0f1babb447","type":"go","to_node_id":"5aafc64682ba963c28964554","chTime":1521483172980}],"semaphors":[]},"title":"Timeout","description":"","x":772,"y":432,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaff67d513aa028cc3f44ea","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaff67d513aa028cc3f44eb","extra":{"corezoid_reference":"bitrix24_token","access_token":"{{access_token}}","client_endpoint":"{{client_endpoint}}","domain":"{{domain}}","member_id":"{{member_id}}","refresh_token":"{{refresh_token}}","scope":"{{scope}}","server_endpoint":"{{server_endpoint}}","status":"{{status}}"},"extra_type":{"corezoid_reference":"string","access_token":"string","client_endpoint":"string","domain":"string","member_id":"string","refresh_token":"string","scope":"string","server_endpoint":"string","status":"string"},"group":"","id":"3b8ff1eb-6138-4e5f-8e58-67c8eca6fa30","conv_id":370761,"convTitle":"Credentials (Merge)","user_id":56916},{"id":"45eb8328-730e-4c33-ad3d-d5825dc189a1","type":"go","to_node_id":"5aaffd7560e3275612c311dc","chTime":1521483170385}],"semaphors":[]},"title":"Update credentials","description":"","x":772,"y":272,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaff67d513aa028cc3f44eb","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaff67d513aa028cc3f44ee","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"b642f0c1-6252-4a08-a945-be00c85958b9"},{"type":"go_if_const","to_node_id":"5aaff67d513aa028cc3f44ee","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"5b391b27-c633-466f-965c-54e2cec6b7e2"},{"type":"go_if_const","to_node_id":"5aaff70982ba963c28bdb244","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"f66affe6-9000-4e90-96a3-e503d0633599"},{"type":"go_if_const","to_node_id":"5aaff70982ba963c28bdb244","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"afb1cd58-815a-468c-88fc-327614d2cd3b"},{"type":"go","to_node_id":"5aaff70982ba963c28bdb244","id":"6c92d670-67ea-4dbf-b248-50154e840682"}],"semaphors":[]},"title":"","description":"","x":1020,"y":360,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff67d513aa028cc3f44ef","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1384,"y":300,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaff7b382ba963c28be23fb","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"eb5813cc-8e1f-4756-8620-163445ffd758"},{"id":"33cd667c-5d5e-4439-b408-451f04b9d661","type":"go","to_node_id":"5aafc3c660e327561295626c","chTime":1521481632242}],"semaphors":[]},"title":"Failed to refresh access_token","description":"","x":144,"y":92,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaff70982ba963c28bdb244","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"40350bb3-2bc1-4647-add8-fba0d84896ce","exception_reason":"Failed to save access_token"},{"id":"5b69bdc8-d42f-4c5f-b4fe-5632584195b1","type":"go","to_node_id":"5aaff67d513aa028cc3f44ef","chTime":1521481471421}],"semaphors":[]},"title":"Failed to save access_token","description":"","x":1108,"y":272,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc2ae60e32756129468a1","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aafc2ae60e32756129468a2","format":"","method":"GET","url":"https://oauth.bitrix.info/oauth/token/","extra":{"grant_type":"authorization_code","client_id":"{{client_id}}","client_secret":"{{client_secret}}","code":"{{code}}"},"extra_type":{"grant_type":"string","client_id":"string","client_secret":"string","code":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"59f7f53f-1da1-4cc4-9f7c-a0df7443f12d","is_migrate":true},{"id":"0780a17b-667f-48d4-a7c1-7fe8465653c7","type":"go","to_node_id":"5aaff67d513aa028cc3f44ea","chTime":1521481564294}],"semaphors":[]},"title":"Get Token","description":"","x":1048,"y":96,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaff67d513aa028cc3f44ee","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaff67d513aa028cc3f44ea","id":"5fa32e3b-10cb-44fb-be84-9be2b4f8a326"}]},"title":"","description":"","x":1020,"y":272,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc2ae60e32756129468a2","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafc2ae60e32756129468a3","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"906d1aea-6a32-4ffa-b99f-389a63413a51"},{"type":"go_if_const","to_node_id":"5aaff2db513aa028cc3cc642","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"3097cb4f-7396-4d64-9e90-33987d9aa1b6"},{"type":"go_if_const","to_node_id":"5aafc2ae60e32756129468a3","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"bdaec4ac-5cf8-4820-a649-07956a5feb44"},{"type":"go","to_node_id":"5aaff2db513aa028cc3cc642","id":"87c53844-a76a-4143-9c7b-1efdcc516ffc"}],"semaphors":[]},"title":"","description":"","x":1308,"y":172,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff2db513aa028cc3cc642","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"bac4e83a-275d-4254-90b6-427586a82890","exception_reason":"Failed to get access_token"},{"id":"bf7e3d51-40ec-4270-bd45-85b2dc5c401c","type":"go","to_node_id":"5aafc2ae60e32756129468a5","chTime":1521480400526}],"semaphors":[]},"title":"Failed to get access_token","description":"","x":1396,"y":96,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc3c660e3275612956264","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafc3c660e3275612956268","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"5b2f35a2-fc6a-419f-b46a-1e630b9cbbfb"},{"type":"go_if_const","to_node_id":"5aaff7b382ba963c28be23fb","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"c30d23cb-5eb8-497d-8d70-abdb3ce317ec"},{"type":"go_if_const","to_node_id":"5aafc3c660e3275612956268","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"32ee5f74-a3b6-44ea-8bd7-89cfb2ebc93c"},{"type":"go","to_node_id":"5aaff7b382ba963c28be23fb","id":"77e53b91-fc47-460e-bf44-a08ef049a724"}],"semaphors":[]},"title":"","description":"","x":372,"y":184,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc2ae60e32756129468a3","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafc2ae60e32756129468a1","id":"875f394b-5731-4047-b26f-697e9c1e631c"}]},"title":"","description":"","x":1308,"y":96,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc2ae60e32756129468a5","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1668,"y":124,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc3c660e327561295626c","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":76,"y":120,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc64682ba963c28964555","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafc64682ba963c28964556","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"dc3c2062-1261-4068-a72e-534faba04948"},{"type":"go_if_const","to_node_id":"5aafc64682ba963c28964556","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"d214a2ed-9f5f-4749-936d-263380cd084f"},{"type":"go_if_const","to_node_id":"5aafc64682ba963c28964556","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"0ce56dfe-6719-4cc1-9ff1-1e0345580c99"},{"type":"go_if_const","to_node_id":"5aafc70e60e3275612980ccf","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"7df81654-0fca-446a-9e68-523edf545283"},{"type":"go","to_node_id":"5aafc70e60e3275612980ccf","id":"767084b0-a976-4b02-b6a9-219055ad0b12"}],"semaphors":[]},"title":"","description":"","x":1024,"y":688,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc64682ba963c28964557","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Copy in self: Other Errors","description":"","x":1388,"y":620,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc6fa513aa028cc1709fe","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":872,"y":888,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aafc1be60e32756129385fa","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"cccb3a29-90c3-4624-b5cd-1bbcfcd12da4","exception_reason":"Failed to get credentials to Bitrix24"},{"id":"e35a3ade-7ed0-4147-94cb-26687835ff4a","type":"go","to_node_id":"5aafc146513aa028cc11ea64","chTime":1521467827683}],"semaphors":[]},"title":"Failed to get credentials to Bitrix24","description":"","x":1044,"y":-80,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc8b2513aa028cc18e399","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":144,"y":-52,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafc8b2513aa028cc18e397","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"refresh_token":"{{conv[367769].ref[bitrix24_token].refresh_token}}"},"extra_type":{"refresh_token":"string"},"err_node_id":"5ab0037e82ba963c28c5c4d5","id":"d40c5ed4-60f8-4c55-ae70-0c9ae04c3415"},{"id":"15e73d51-8196-4c6c-adf4-76f99be8ceb7","type":"go","to_node_id":"5aafc3c660e3275612956262","chTime":1521469647182}],"semaphors":[]},"title":"Set refresh_token","description":"","x":484,"y":-80,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc70e60e3275612980ccf","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"1fb5a49a-7f4f-4ed1-b66c-ab025dad4239","exception_reason":"Self-replication failure"},{"id":"71a5c454-6671-4b2f-b75f-2d6238aee038","type":"go","to_node_id":"5aafc64682ba963c28964557","chTime":1521469185422}],"semaphors":[]},"title":"Self-replication failure","description":"","x":1112,"y":592,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc6b4f6c3767dbda2d0da","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"f81fd4a8-45e6-4a12-ac76-8b4e90f2d9bb"},{"id":"cf74e1e9-cea5-496d-a050-f87e323ce0b6","type":"go","to_node_id":"5aafc6fa513aa028cc1709fe","chTime":1521469166195}],"semaphors":[]},"title":"","description":"","x":772,"y":752,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc64682ba963c28964556","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafc64682ba963c28964554","id":"38bf9e7d-0436-421c-bbf9-bcb203371e51"}]},"title":"","description":"","x":1024,"y":596,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc64682ba963c28964554","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"create","data":{"copy":"ok"},"data_type":{"copy":"string"},"group":"","ref":"{{root.task_id}}","err_node_id":"5aafc64682ba963c28964555","id":"db5616a0-90e9-435e-910c-5adda223e7d8","conv_id":370708,"user_id":56916},{"id":"1698331b-a5d7-42b0-bc87-a6694d072dc2","type":"go","to_node_id":"5aafc6b4f6c3767dbda2d0da","chTime":1521469160456}],"semaphors":[]},"title":"Self Update","description":"","x":772,"y":596,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc3c660e3275612956268","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafc3c660e3275612956262","id":"c8cf072d-fa38-49d3-9252-28931e2d46fd"}]},"title":"","description":"","x":372,"y":92,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafc39e82ba963c28944ca4","obj_type":0,"condition":{"logics":[{"to_node_id":"5aafc2ae60e32756129468a1","type":"go_if_const","id":"18d9d4ab-37cf-42e1-bde4-1b4a5f35c5e1","conditions":[{"param":"copy","const":"no","fun":"eq","cast":"string"}],"chTime":1521468329332},{"id":"87ba90d4-b074-4e38-960c-91074750fd0d","type":"go","to_node_id":"5aafc8b2513aa028cc18e397","chTime":1521468360194}],"semaphors":[]},"title":"","description":"","x":776,"y":96,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc146513aa028cc11ea5f","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"client_id":"{{conv[367769].ref[bitrix24_credentials].client_id}}","client_secret":"{{conv[367769].ref[bitrix24_credentials].client_secret}}","code":"{{conv[367769].ref[bitrix24_credentials].code}}"},"extra_type":{"client_id":"string","client_secret":"string","code":"string"},"err_node_id":"5aafc1be60e32756129385fa","id":"250dcd4a-5aa4-4bb1-b518-61102ac4a63f"},{"id":"dec0586e-6217-48b5-adf2-9dce1a5908fe","type":"go","to_node_id":"5aafc39e82ba963c28944ca4","chTime":1521469038029}],"semaphors":[]},"title":"Set Credentials","description":"","x":776,"y":-76,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafc146513aa028cc11ea64","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Set Credentials: Other Errors","description":"","x":1324,"y":-52,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafb492513aa028cc053be2","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aafc146513aa028cc11ea5f","id":"4f5a7ccd-4035-4cdc-a73f-8cede07f74b0"}],"semaphors":[]},"title":"Start","description":"","x":876,"y":-140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":370747,"parent_id":201045,"title":"Bitrix24 - Share Token","description":"","status":"active","params":[],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aafdd0360e3275612ac6b72","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aafdd0360e3275612ac6b75","extra":{"exchange":"cz.events","payload":"{{conv[367769].ref[bitrix24_token].access_token}}","routing_key":"bitrix24.access_token"},"extra_type":{"exchange":"string","payload":"string","routing_key":"string"},"group":"","id":"7749d966-fe41-4686-be31-ac5e6ecea786","conv_id":367561,"user_id":56916},{"id":"be43ed42-8e88-4886-91b7-f1f7c237995b","type":"go","to_node_id":"5aafdc4382ba963c28aac153","chTime":1521474816419}],"semaphors":[]},"title":"Send access token","description":"","x":780,"y":244,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafdd0360e3275612ac6b75","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aafdd0360e3275612ac6b77","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"ebd616eb-f8d9-4c48-81b2-d1cce6cdd7b4"},{"type":"go_if_const","to_node_id":"5aafdd0360e3275612ac6b77","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"af232e5b-175d-4ea1-a9a9-24228466a947"},{"type":"go_if_const","to_node_id":"5aafdd0360e3275612ac6b79","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"34bbcd02-84a3-4735-99b7-7a7a8bdaabbe"},{"type":"go_if_const","to_node_id":"5aafdd0360e3275612ac6b79","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"137d0100-f7bc-4390-a4d5-d4460726f91b"},{"type":"go","to_node_id":"5aafdd0360e3275612ac6b79","id":"72370808-0d5b-4442-b9fb-cb3b23d301c4"}],"semaphors":[]},"title":"","description":"","x":1032,"y":336,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafdd0360e3275612ac6b79","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1164,"y":364,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aafdd0360e3275612ac6b77","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aafdd0360e3275612ac6b72","id":"fecaad37-0534-42bf-8ed5-406fe392bc3a"}]},"title":"","description":"","x":1032,"y":244,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafdc4382ba963c28aac14f","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aafdd0360e3275612ac6b72","id":"91db0b3a-30dc-418f-8056-0c706d3e1d4b"}],"semaphors":[]},"title":"Start","description":"","x":880,"y":100,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafdc4382ba963c28aac153","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":880,"y":468,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":201045,"parent_id":199282,"title":"Bitrix24","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":367521,"parent_id":199287,"title":"RabbitMQ - Set credentials","description":"Устанавливает данные доступа к кластеру RabbitMQ","status":"active","params":[{"name":"host","type":"string","descr":"Host URL","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"authorization","type":"string","descr":"basic authorization token","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"vhost","type":"string","descr":"virtual host","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaff89cf6c3767dbdcc8803","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaff89cf6c3767dbdcc8804","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"9e33bb51-9a7b-4f9e-a9f0-f2504f870035"},{"type":"go_if_const","to_node_id":"5aaff89cf6c3767dbdcc8804","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"23910eb0-97b8-4c02-a79f-f346966f064e"},{"type":"go_if_const","to_node_id":"5aaff89cf6c3767dbdcc8806","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"f0b510c2-7a69-4492-b209-dda21518ac60"},{"type":"go_if_const","to_node_id":"5aaff89cf6c3767dbdcc8806","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"fdd6db0b-3dd8-4cd3-b8d1-3994d20d445a"},{"type":"go","to_node_id":"5aaff89cf6c3767dbdcc8806","id":"7d8a2167-becf-4572-aa2b-3f0622bf9d97"}],"semaphors":[]},"title":"","description":"","x":296,"y":252,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff89cf6c3767dbdcc8806","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":428,"y":280,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa57f6f6c3765f50785472","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aaff89cf6c3767dbdcc8802","id":"e4d3a9a6-a0f8-48e3-ba85-a181856c9994"}],"semaphors":[]},"title":"Start","description":"","x":144,"y":56,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff89cf6c3767dbdcc8804","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaff89cf6c3767dbdcc8802","id":"4a0f39f2-b903-44f4-b959-ae2baceb4d8e"}]},"title":"","description":"","x":296,"y":160,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaff89cf6c3767dbdcc8802","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaff89cf6c3767dbdcc8803","extra":{"corezoid_reference":"rabbitmq_credentials"},"extra_type":{"corezoid_reference":"string"},"group":"all","id":"89013acf-efac-4da5-bad2-24bc18fda1cd","conv_id":370761,"convTitle":"Credentials (Merge)","user_id":56916},{"id":"ae35e139-1249-4b1f-990b-607557f91fbb","type":"go","to_node_id":"5aaa57f6f6c3765f50785485","chTime":1521481946334}],"semaphors":[]},"title":"Update credentials","description":"","x":44,"y":160,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa57f6f6c3765f50785485","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":144,"y":364,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":367561,"parent_id":199287,"title":"RabbitMQ - Send message","description":"Доставить сообщение","status":"active","params":[{"name":"app_id","type":"string","descr":"Properties.AppId","flags":["input"],"regex":"","regex_error_text":""},{"name":"authorization","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""},{"name":"content_encoding","type":"string","descr":" Properties.ContentEncoding","flags":["input"],"regex":"","regex_error_text":""},{"name":"content_type","type":"string","descr":"Properties.ContentType","flags":["input"],"regex":"","regex_error_text":""},{"name":"correlation_id","type":"string","descr":"Properties.CorrelationId","flags":["input"],"regex":"","regex_error_text":""},{"name":"exchange","type":"string","descr":"","flags":["input"],"regex":"","regex_error_text":""},{"name":"headers","type":"object","descr":"","flags":["input"],"regex":"","regex_error_text":""},{"name":"host","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""},{"name":"payload","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"reply_to","type":"string","descr":"Properties.ReplyTo","flags":["input"],"regex":"","regex_error_text":""},{"name":"routed","type":"boolean","descr":"","flags":["required","output"],"regex":"","regex_error_text":""},{"name":"routing_key","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"type","type":"string","descr":"Properties.Type","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"vhost","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaa6499f6c3765f5084a8d0","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaa6499f6c3765f5084a8d2","extra":{"payload":"{{payload}}","routing_key":"1c.foxylink.dead.letter","headers":"{{headers}}"},"extra_type":{"payload":"string","routing_key":"string","headers":"object"},"group":"","id":"11f3ec0c-cfe1-4c3c-a77c-c9978f249292","conv_id":367561,"user_id":56916,"convTitle":"RabbitMQ - Send message"},{"id":"ce3feefc-c936-492e-97ea-5f944bcb421c","type":"go","to_node_id":"5aaa6471513aa028cc7ef65a","chTime":1521117307484}],"semaphors":[]},"title":"Deliver dead message","description":"","x":992,"y":768,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa6001513aa028cc7a9742","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"authorization":"{{conv[367769].ref[rabbitmq_credentials].authorization}}","host":"{{conv[367769].ref[rabbitmq_credentials].host}}","vhost":"{{conv[367769].ref[rabbitmq_credentials].vhost}}"},"extra_type":{"authorization":"string","host":"string","vhost":"string"},"err_node_id":"5adee417f6c376424157c39f","id":"57ba8090-cd54-4777-9e05-37abec26205f"},{"id":"f016f6e6-1ec5-4d6f-9ae0-19d63b306e38","type":"go","to_node_id":"5ad88b2b82ba96043e8b963d","chTime":1521115457457}],"semaphors":[]},"title":"Set authorization credentials","description":"","x":348,"y":-28,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad8832d513aa041a1ef88d4","obj_type":0,"condition":{"logics":[{"to_node_id":"5af422ba513aa0242de9935a","type":"go_if_const","id":"8508efa0-e200-4e62-a1fd-d2ac7f0d4c7b","conditions":[{"param":"{{exchange}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1525949149053},{"id":"ff6bb38d-8c59-4945-96ef-6842272df1b7","type":"go","to_node_id":"5ad8837d82ba96043e84d2fc","chTime":1524138881522}],"semaphors":[]},"title":"","description":"","x":348,"y":-448,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af423d860e3271d23cc8486","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"745b79c1-d833-4dbb-b5fe-399920310716","exception_reason":"Failed to set {content-encoding=utf-8}"},{"id":"42d3ce32-3947-4d4c-8d8b-291704cfc139","type":"go","to_node_id":"5ad8837d82ba96043e84d2fe","chTime":1525949447041}],"semaphors":[]},"title":"Failed to set content-encoding","description":"","x":60,"y":-140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad88b2b82ba96043e8b963d","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"timestamp":"$.unixtime()"},"extra_type":{"timestamp":"number"},"err_node_id":"5adee47360e3277ba8914cbc","id":"644d5d67-c99d-49bd-ae66-90f5d8876209"},{"id":"09dfa137-8528-4970-94ef-3cf7e5db7434","type":"go","to_node_id":"5aaa71d0f6c3765f509193a9","chTime":1524140852655}],"semaphors":[]},"title":"Timestamp","description":"","x":352,"y":152,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af423a882ba9606c49b3f72","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"content_encoding":"utf-8"},"extra_type":{"content_encoding":"string"},"err_node_id":"5af423d860e3271d23cc8486","id":"ddf4a0f0-8957-460b-a360-aee6d0b328d4","chTime":1525949476773},{"id":"ef01e360-f815-4a43-924c-6f736ccb0697","type":"go","to_node_id":"5aaa6001513aa028cc7a9742","chTime":1525949474420}],"semaphors":[]},"title":"Set content-encoding","description":"","x":160,"y":-140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af4238782ba9606c49b23b0","obj_type":0,"condition":{"logics":[{"to_node_id":"5af423a882ba9606c49b3f72","type":"go_if_const","id":"71d92498-98d4-4f91-aaf6-0e0c64949e45","conditions":[{"param":"{{content_encoding}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1525949480420},{"id":"2eb6b0f7-43b3-4b21-bc73-eeb77d03d3b4","type":"go","to_node_id":"5aaa6001513aa028cc7a9742","chTime":1525949342052}],"semaphors":[]},"title":"","description":"","x":348,"y":-184,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4230a60e3271d23cbdefa","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"exception_reason":"Failed to set {content-type=application/json}","id":"174fcaea-ba41-48ee-9b27-be7a075765d6"},{"id":"b8db9b7b-a729-485f-a7bf-04c3ea954af0","type":"go","to_node_id":"5ad8837d82ba96043e84d2fe","chTime":1525949255577}],"semaphors":[]},"title":"Failed to set content-type","description":"","x":56,"y":-272,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af422f6f6c37674c9dad7cb","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"content_type":"application/json"},"extra_type":{"content_type":"string"},"err_node_id":"5af4230a60e3271d23cbdefa","id":"a06390e0-b128-4771-8ff7-32a18a7bed11","chTime":1525949198003},{"id":"19d71b25-a62c-4964-88a5-c80e91987da4","type":"go","to_node_id":"5af4238782ba9606c49b23b0","chTime":1525949337381}],"semaphors":[]},"title":"Set content-type","description":"","x":148,"y":-272,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af422ba513aa0242de9935a","obj_type":0,"condition":{"logics":[{"to_node_id":"5af4238782ba9606c49b23b0","type":"go_if_const","id":"85ae3f14-e116-437e-a7d8-15e2d25fd710","conditions":[{"param":"{{content_type}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1525949334185},{"id":"f7c41c01-4f9c-4cf8-8f31-d8c6dae8097e","type":"go","to_node_id":"5af422f6f6c37674c9dad7cb","chTime":1525949296100}],"semaphors":[]},"title":"","description":"","x":348,"y":-312,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad88c93513aa041a1f84089","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"id":"304852c4-b429-44f5-ad7a-c181a90b46ee","exception_reason":"Failed to set {app_id=Corezoid}"},{"id":"107c343b-1b52-4fab-b6b2-5054596c2f8b","type":"go","to_node_id":"5ad8837d82ba96043e84d2fe","chTime":1525949253185}],"semaphors":[]},"title":"Failed to set app id","description":"","x":52,"y":-576,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad88c8df6c3765d69f6bd87","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"app_id":"Corezoid"},"extra_type":{"app_id":"string"},"err_node_id":"5ad88c93513aa041a1f84089","id":"e634c6fd-15f9-484d-abe6-d45069dc73e7"},{"id":"62face8c-e514-4e90-9ce2-d62c56ee468d","type":"go","to_node_id":"5ad8832d513aa041a1ef88d4","chTime":1524141258949}],"semaphors":[]},"title":"Set app id","description":"","x":144,"y":-576,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad88c6860e3271190aae757","obj_type":0,"condition":{"logics":[{"to_node_id":"5ad8832d513aa041a1ef88d4","type":"go_if_const","id":"df32b27e-8fd4-4f46-b381-b01d456ac633","conditions":[{"param":"{{app_id}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1524141181739},{"id":"6b466a7f-ce9d-4151-b26e-114ef6f6ef27","type":"go","to_node_id":"5ad88c8df6c3765d69f6bd87","chTime":1524141256277}],"semaphors":[]},"title":"","description":"","x":348,"y":-580,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad8837d82ba96043e84d2fc","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"exchange":"amq.default"},"extra_type":{"exchange":"string"},"err_node_id":"5ad883d782ba96043e8523f4","id":"73dfb005-8b78-4da4-b5d8-4b1eb9124546"},{"id":"29c0bdd7-9be9-43d3-b590-99602ebbfa18","type":"go","to_node_id":"5af422ba513aa0242de9935a","chTime":1525949155440}],"semaphors":[]},"title":"Set amq.default","description":"","x":144,"y":-404,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa71d0f6c3765f509193b1","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Convertion Error","description":"","x":900,"y":476,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa71d0f6c3765f509193ae","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa71d0f6c3765f509193a9","id":"3285bd48-2928-408f-bd96-7e0534fce313"}]},"title":"","description":"","x":616,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad883d782ba96043e8523f4","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"id":"3bd2d2d2-90b0-4b92-ada9-718f3642cb2d","exception_reason":"Failed to set {exchange=amq.default}"},{"id":"55fdef19-bcbb-409a-ae2e-37b1e803fc78","type":"go","to_node_id":"5ad8837d82ba96043e84d2fe","chTime":1524138967831}],"semaphors":[]},"title":"Failed to set exchange","description":"","x":56,"y":-404,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa705d82ba963c282288aa","obj_type":0,"condition":{"logics":[{"src":"var headers = {};\nif (data.headers){\n\theaders = data.headers;        \n}\nheaders.routing_key = data.routing_key;\ndata.headers = headers;","lang":"js","type":"api_code","err_node_id":"5aaa705d82ba963c282288ac","id":"e1405a9f-6e56-452b-bffa-db483fe6ebfe","lang":"js","src":"var headers = {};\nif (data.headers){\n\theaders = data.headers;        \n}\nheaders.routing_key = data.routing_key;\ndata.headers = headers;"},{"id":"1ae8ce49-2688-4d4f-94b1-e60b82209358","type":"go","to_node_id":"5aaa6499f6c3765f5084a8d0","chTime":1521119369613}],"semaphors":[]},"title":"Add to header original routing_key","description":"","x":632,"y":1000,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa71d0f6c3765f509193ab","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa71d0f6c3765f509193ae","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"11cbc5c0-67dc-47d0-af34-4e2450ca12e7"},{"type":"go_if_const","to_node_id":"5adf2f33f6c3764241998cc7","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"a3d2c46b-75a7-4bd4-bd71-43c449f46aed"},{"type":"go","to_node_id":"5adf2f33f6c3764241998cc7","id":"46d3bf55-65d5-47cc-9952-24641e483f15"}],"semaphors":[]},"title":"","description":"","x":620,"y":448,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa60d360e3274302374e23","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa60d360e3274302374e24","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"db1152d6-62e1-4e58-8823-489d93a6f0bb"},{"type":"go_if_const","to_node_id":"5aaa60d360e3274302374e25","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"0a4a66a4-f868-4389-9ed1-c17c388963ec"},{"type":"go_if_const","to_node_id":"5aaa60d360e3274302374e24","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"638bb0f0-1d34-41c1-9db4-6ba4420ce5df"},{"type":"go","to_node_id":"5aaa60d360e3274302374e25","id":"0da1f102-c71f-49d5-a365-62bc71f0286a"}],"semaphors":[]},"title":"","description":"","x":652,"y":664,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa60d360e3274302374e25","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":780,"y":692,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa60d360e3274302374e22","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aaa60d360e3274302374e23","format":"","method":"POST","url":"{{host}}api/exchanges/{{vhost}}/{{exchange}}/publish","extra":{"routing_key":"{{routing_key}}","payload_encoding":"string","properties":"{{properties}}","payload":"{{payload}}"},"extra_type":{"routing_key":"string","payload_encoding":"string","properties":"object","payload":"string"},"max_threads":5,"debug_info":false,"customize_response":true,"response":{"routed":"{{body.routed}}"},"response_type":{"routed":"boolean"},"extra_headers":{"Authorization":"Basic {{authorization}}"},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"d8d710c2-b45f-410e-ac64-9bc0c19b12d4","is_migrate":true},{"id":"326891db-dbaf-4736-b10b-c1362491d424","type":"go","to_node_id":"5aaa6471513aa028cc7ef65a","chTime":1521115351292}],"semaphors":[]},"title":"Send message to exchange","description":"","x":372,"y":588,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5adf2f33f6c3764241998cc7","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"id":"372991ff-46a4-4825-afe5-52f2a179c177","exception_reason":"Convertion Error"},{"id":"a0998908-df84-4d73-b1eb-ad008203737a","type":"go","to_node_id":"5aaa71d0f6c3765f509193b1","chTime":1524576060169}],"semaphors":[]},"title":"","description":"","x":748,"y":448,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5adee417f6c376424157c39f","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"id":"117ef5b0-e5fe-4e8d-a88a-be471ab8b5ea","exception_reason":"Failed to set authorization"},{"id":"3e5accd3-1f4a-4210-9772-866d44d03d88","type":"go","to_node_id":"5aaa6002513aa028cc7a9743","chTime":1524556822905}],"semaphors":[]},"title":"Failed to set authorization","description":"","x":580,"y":72,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa71d0f6c3765f509193a9","obj_type":0,"condition":{"logics":[{"src":"var properties = {};\nproperties.app_id = data.app_id;\nproperties.content_type = data.content_type;\nproperties.content_encoding = data.content_encoding;\nproperties.correlation_id = data.correlation_id;\nproperties.delivery_mode = 2;\nproperties.priority = 0;\nproperties.reply_to = data.reply_to;\nproperties.timestamp = data.timestamp;\nproperties.type = data.type;\nproperties.headers = data.headers;\ndata.properties = properties;","lang":"js","type":"api_code","err_node_id":"5aaa71d0f6c3765f509193ab","id":"be751111-682a-4290-a96d-59e6177c3ed0","lang":"js","src":"var properties = {};\nproperties.app_id = data.app_id;\nproperties.content_type = data.content_type;\nproperties.content_encoding = data.content_encoding;\nproperties.correlation_id = data.correlation_id;\nproperties.delivery_mode = 2;\nproperties.priority = 0;\nproperties.reply_to = data.reply_to;\nproperties.timestamp = data.timestamp;\nproperties.type = data.type;\nproperties.headers = data.headers;\ndata.properties = properties;"},{"id":"25e9edf9-3b02-496f-8598-56462b8bff5a","type":"go","to_node_id":"5aaa60d360e3274302374e22","chTime":1524140879542}],"semaphors":[]},"title":"Filling message properties","description":"","x":372,"y":388,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5adee47360e3277ba8914cbc","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"string"},"mode":"key_value","throw_exception":true,"id":"cf5d775d-f8a6-47ea-a9d9-ae81c91023be","exception_reason":"Failed to set timestamp"},{"id":"0d549570-d033-4ded-9e36-a5c012afd524","type":"go","to_node_id":"5ad88b2b82ba96043e8b963f","chTime":1524556915402}],"semaphors":[]},"title":"Failed to set timestamp","description":"","x":588,"y":240,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa6002513aa028cc7a9743","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Set Credentials: Other Errors","description":"","x":688,"y":100,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad88b2b82ba96043e8b963f","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":704,"y":268,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa5e2f60e327430234cc3b","obj_type":1,"condition":{"logics":[{"id":"2eb95664-e1e6-4ca4-891a-0676ea596e70","type":"go","to_node_id":"5ad88c6860e3271190aae757","chTime":1524141307517}],"semaphors":[]},"title":"Start","description":"","x":448,"y":-640,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad8837d82ba96043e84d2fe","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Failed to set parameters","description":"","x":-232,"y":-340,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa705d82ba963c282288ac","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa705d82ba963c282288af","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"ead29fbd-da35-4620-acca-a416cecd1025"},{"type":"go_if_const","to_node_id":"5aaa705d82ba963c282288b2","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"57a561c9-874a-4e46-bc07-b3d28d3c8f8f"},{"type":"go","to_node_id":"5aaa705d82ba963c282288b2","id":"cec6c0bc-e294-4123-8edc-393986df3937"}],"semaphors":[]},"title":"","description":"","x":888,"y":1096,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa705d82ba963c282288b2","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Enrich Header Error","description":"","x":1012,"y":1124,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa705d82ba963c282288af","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa705d82ba963c282288aa","id":"fcedc596-2a24-4a77-a70f-b476b9cddb28"}]},"title":"","description":"","x":888,"y":968,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa6835f6c3765f50882e5b","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"routed":"{{routed}}"},"res_data_type":{"routed":"boolean"},"mode":"key_value","throw_exception":false,"id":"976e5047-26cc-412c-be66-ec8523ea6cfe"},{"id":"2c0e569f-c215-442f-8c3f-9e2509464fb7","type":"go","to_node_id":"5aaa5e2f60e327430234cc3e","chTime":1521117228016}],"semaphors":[]},"title":"Return routed status to parent process","description":"","x":368,"y":948,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa6499f6c3765f5084a8d2","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa6499f6c3765f5084a8d5","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"f6e8b1f6-c722-434a-a99e-3cc354616eeb"},{"type":"go_if_const","to_node_id":"5aaa6499f6c3765f5084a8d5","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"fbe58a12-701e-4174-95a4-3b32005301df"},{"type":"go_if_const","to_node_id":"5aaa6499f6c3765f5084a8d7","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"295d6401-6c4a-4350-a8f4-773d934a7266"},{"type":"go_if_const","to_node_id":"5aaa6499f6c3765f5084a8d7","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"440eea4b-6167-4693-913f-cde70f22896c"},{"type":"go","to_node_id":"5aaa6499f6c3765f5084a8d7","id":"03e1369b-bc63-4846-b60d-5eb9282fc765"}],"semaphors":[]},"title":"","description":"","x":1248,"y":868,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa6499f6c3765f5084a8d7","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Routing Error","description":"","x":1396,"y":896,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa6499f6c3765f5084a8d5","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa6499f6c3765f5084a8d0","id":"fd7dfeef-0cbc-4fa3-ad65-4b522116e201"}]},"title":"","description":"","x":1248,"y":784,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa6471513aa028cc7ef65a","obj_type":0,"condition":{"logics":[{"to_node_id":"5aaa705d82ba963c282288aa","type":"go_if_const","id":"80402b9a-de16-4a3f-b56b-3735e0907730","conditions":[{"param":"{{routed}}","const":"false","fun":"eq","cast":"boolean"}],"chTime":1521119353203},{"id":"20a8b30b-f7f2-4ab0-8119-aa55d352b270","type":"go","to_node_id":"5aaa6835f6c3765f50882e5b","chTime":1521116276735}],"semaphors":[]},"title":"Routed successfully?","description":"","x":368,"y":788,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa5e2f60e327430234cc3e","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":468,"y":1128,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aaa60d360e3274302374e24","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa60d360e3274302374e22","id":"bbb0cb79-1e67-492f-ac74-021fbbb17495"}]},"title":"","description":"","x":648,"y":580,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":199287,"parent_id":199282,"title":"RabbitMQ","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":367495,"parent_id":199282,"title":"Receive & Route message","description":"Получает и выполняет маршрутизацию сообщений","status":"active","params":[{"name":"exchange","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""},{"name":"routing_key","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""},{"name":"TaskId","type":"string","descr":"","flags":[],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af43300513aa0242df7fbd6","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af43300513aa0242df7fbd7","extra":{"ChannelName":"{{canonical.ChannelName}}","ChatId":"{{canonical.ChatId}}","Text":"Доброго времени суток! Введити свой номер телефона для доступа ко всем возможностям"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"59083ae7-f4ab-4c62-b775-342233f31a67","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"0f317b21-b4ad-4fd2-9b4d-4da8589eda2c","type":"go","to_node_id":"5af444f382ba9606c4b78141","chTime":1525957965877}],"semaphors":[]},"title":"Послать приветственное сообщение","description":"","x":1344,"y":-1172,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af563bf60e3271d23668286","obj_type":0,"condition":{"logics":[{"to_node_id":"5ad884c3513aa041a1f10b13","type":"go_if_const","id":"8d0135a4-74c7-4ea8-94a2-524a7672732e","conditions":[{"param":"{{success}}","const":"false","fun":"eq","cast":"boolean"}],"chTime":1526031322524},{"id":"e2067de6-010c-487b-916a-3b7cbdb90ea7","type":"go","to_node_id":"5af5613060e3271d2364407f","chTime":1526031295463}],"semaphors":[]},"title":"","description":"","x":2260,"y":-212,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55fc260e3271d2362ffc4","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af55fc260e3271d2362ffcb","extra":{"ChatId":"{{canonical.ChatId}}","PhoneNumber":"{{PhoneNumber}}","UserId":"{{canonical.UserId}}","ChannelName":"{{canonical.ChannelName}}"},"extra_type":{"ChatId":"string","PhoneNumber":"string","UserId":"string","ChannelName":"string"},"group":"","id":"ecd13a99-c3ce-4c06-a261-7a4341aa7e18","conv_id":415790,"user_id":56916,"convTitle":"Client Authorize (Авторизация клиента)"},{"id":"69afd3f9-ebe4-414b-b465-342f2c04d5d4","type":"go","to_node_id":"5af563bf60e3271d23668286","chTime":1526030640905}],"semaphors":[]},"title":"Провести авторизацию клиента","description":"","x":2260,"y":-388,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55fc260e3271d2362ffcb","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af55fc260e3271d2362ffd0","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"aa930602-2b1e-4a24-aa24-0872a0bb6317"},{"type":"go_if_const","to_node_id":"5af55fc260e3271d2362ffd0","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"acd1768e-4aa7-4dd2-ad6d-99361b56eb5a"},{"type":"go_if_const","to_node_id":"5af55fc260e3271d2362ffd4","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"a6b7b0cf-1f28-4e40-81ab-b8cdfa55a53b"},{"type":"go_if_const","to_node_id":"5af55fc260e3271d2362ffd4","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"47de24b4-3abe-492a-be5d-9f2a463aeb71"},{"type":"go","to_node_id":"5af55fc260e3271d2362ffd4","id":"f81477ad-2b72-4b37-8291-8e8cd1aa005b"}],"semaphors":[]},"title":"","description":"","x":2492,"y":-308,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55fc260e3271d2362ffd0","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af55fc260e3271d2362ffc4","id":"72c78542-3f22-4c8a-8387-a6e94791130f"}]},"title":"","description":"","x":2492,"y":-400,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af56076513aa0242d87c062","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af56076513aa0242d87c065","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"1a0f1bcf-8c72-42b3-b865-625eb0b29173"},{"type":"go_if_const","to_node_id":"5af56076513aa0242d87c068","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"5277afbc-1748-45fb-8f06-4441ffe3151f"},{"type":"go","to_node_id":"5af56076513aa0242d87c068","id":"9ecc0646-9882-455b-b124-00b084a48df1"}],"semaphors":[]},"title":"","description":"","x":2492,"y":-488,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af56076513aa0242d87c068","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":2624,"y":-460,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af447a960e3271d23eab160","obj_type":0,"condition":{"logics":[{"to_node_id":"5af56076513aa0242d87c05c","type":"go_if_const","id":"e4fb3b15-b2a8-4afe-865d-4bb8726a5561","conditions":[{"param":"{{PhoneNumber}}","const":"true","fun":"eq","cast":"boolean"}],"chTime":1526030550326},{"id":"58a76cd8-2b63-4d8c-b72d-1d35817fdd8f","type":"go_if_const","conditions":[{"param":"{{VerificationCode}}","const":"true","fun":"eq","cast":"boolean"}],"to_node_id":"5af5647af6c37674c97c00ab","chTime":1526031464842},{"id":"ac10ed7c-5d46-4687-84a6-1e3b26caa2d7","type":"go","to_node_id":"5ad884c3513aa041a1f10b13","chTime":1525958660460}],"semaphors":[]},"title":"Клиент ввел телефонный номер","description":"","x":1816,"y":-344,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5647af6c37674c97c00af","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af5647af6c37674c97c00b0","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"6db77413-15fd-4f20-926e-34e6698e47c6"},{"type":"go_if_const","to_node_id":"5af5647af6c37674c97c00b0","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"16654d90-c131-4a71-a615-4474e7f31c1a"},{"type":"go_if_const","to_node_id":"5af5647af6c37674c97c00b2","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"c6b7583a-5696-4ca2-af6b-aee940fbee71"},{"type":"go_if_const","to_node_id":"5af5647af6c37674c97c00b2","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"e9cad9ea-25a0-436d-9f56-91e746b8b4be"},{"type":"go","to_node_id":"5af5647af6c37674c97c00b2","id":"54a61121-b163-43c7-9669-3ad8ab569449"}],"semaphors":[]},"title":"","description":"","x":2892,"y":-152,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5647af6c37674c97c00b0","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af5647af6c37674c97c00ab","id":"0cdbac48-5ed7-4663-9cf9-7249e508e592"}]},"title":"","description":"","x":2872,"y":-236,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5647af6c37674c97c00b2","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":3008,"y":-120,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5647af6c37674c97c00ab","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af5647af6c37674c97c00af","extra":{"ChatId":"{{canonical.ChatId}}","UserId":"{{canonical.UserId}}","VerificationCode":"{{canonical.Text}}","ChannelName":"{{canonical.ChannelName}}"},"extra_type":{"ChatId":"string","UserId":"string","VerificationCode":"string","ChannelName":"string"},"group":"","id":"c97c757c-0cc2-4399-8b23-da436528c035","conv_id":415790,"convTitle":"Client Authorize (Авторизация клиента)","user_id":56916},{"id":"5a840762-69c4-489b-b551-9928cff656ee","type":"go","to_node_id":"5af563bf60e3271d23668286","chTime":1526031577806}],"semaphors":[]},"title":"Проверить код подтверждения","description":"","x":2636,"y":-240,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5613060e3271d2364407f","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":2360,"y":-52,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af56076513aa0242d87c05c","obj_type":0,"condition":{"logics":[{"src":"var PhoneNumber = data.canonical.Text.replace(/\\D+/g,'');\ndata.PhoneNumber = PhoneNumber.substr(PhoneNumber.length - 10);\n","lang":"js","type":"api_code","err_node_id":"5af56076513aa0242d87c062","id":"3a7182d5-d115-4d76-ac9e-910f7a28f8ee","lang":"js","src":"var PhoneNumber = data.canonical.Text.replace(/\\D+/g,'');\ndata.PhoneNumber = PhoneNumber.substr(PhoneNumber.length - 10);\n"},{"id":"e064c559-575c-4000-be13-fe8276f7f22b","type":"go","to_node_id":"5af55fc260e3271d2362ffc4","chTime":1526030557231}],"semaphors":[]},"title":"Преобразовываем телефон в нужный формат","description":"","x":2260,"y":-564,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55fc260e3271d2362ffd4","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":2608,"y":-280,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af56076513aa0242d87c065","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af56076513aa0242d87c05c","id":"441ac20f-5afd-4dbc-b99e-b68b1ea7fe3c"}]},"title":"","description":"","x":2492,"y":-584,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af445cd60e3271d23e931df","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af445cd60e3271d23e931e2","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"72e2cb6a-f8a9-4cbd-ae09-6cdce6903a80"},{"type":"go_if_const","to_node_id":"5af445cd60e3271d23e931e3","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"8dfa05a0-3312-40db-8396-0da7924e5b48"},{"type":"go","to_node_id":"5af445cd60e3271d23e931e3","id":"1bcae9e1-6047-462e-8e6a-bbe903592b9e"}],"semaphors":[]},"title":"","description":"","x":2052,"y":-636,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa902f60e327430263e527","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa902f60e327430263e528","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"b00d0255-353a-4586-b223-32988da340cb"},{"type":"go_if_const","to_node_id":"5aaa902f60e327430263e528","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"b6874c3c-06d1-4ed3-bbfa-419e6028c46d"},{"type":"go_if_const","to_node_id":"5aaa902f60e327430263e52c","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"a28ee357-0c0b-4a32-a428-9125070cb1be"},{"type":"go_if_const","to_node_id":"5aaa902f60e327430263e52c","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"aa5c4dba-9fe5-4812-a317-515a98b5407c"},{"type":"go","to_node_id":"5aaa902f60e327430263e52c","id":"c55da120-dc84-4cf1-9a12-cbce04820e36"}],"semaphors":[]},"title":"","description":"","x":232,"y":-368,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad884c3513aa041a1f10b15","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad884c3513aa041a1f10b16","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"4af9af39-30a5-428d-9e2c-811b5429757c"},{"type":"go_if_const","to_node_id":"5ad884c3513aa041a1f10b16","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"1478629f-4392-47b7-94f8-7f05bd43b03b"},{"type":"go_if_const","to_node_id":"5ad884c3513aa041a1f10b17","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"ec60ea66-5c43-4920-9011-abd00e4132d8"},{"type":"go_if_const","to_node_id":"5ad884c3513aa041a1f10b17","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"2fe58f68-8d08-4bc1-b6cc-d11772c85a5a"},{"type":"go","to_node_id":"5ad884c3513aa041a1f10b17","id":"c9c17b1f-82f8-4374-a928-dda76caff031"}],"semaphors":[]},"title":"","description":"","x":1104,"y":180,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af4589182ba9606c4c65dfb","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af4589182ba9606c4c65dfc","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"101c3940-ecd3-4070-b058-abcffb0232de"},{"type":"go_if_const","to_node_id":"5af4589182ba9606c4c65dff","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"dbc6c0dd-dc13-4730-93e9-b3fc39bf93b4"},{"type":"go","to_node_id":"5af4589182ba9606c4c65dff","id":"0205c4d4-da28-45ef-86ef-fd2162bb802b"}],"semaphors":[]},"title":"","description":"","x":2064,"y":-448,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af4589182ba9606c4c65df9","obj_type":0,"condition":{"logics":[{"src":"if (data.canonical.Text.search(\"^[000001-999999]{6}$\") != -1){\n\tdata.VerificationCode = true; \t   \n}","lang":"js","type":"api_code","err_node_id":"5af4589182ba9606c4c65dfb","id":"a3952fb4-655d-418c-be6d-e6da9c2572d3","lang":"js","src":"if (data.canonical.Text.search(\"^[000001-999999]{6}$\") != -1){\n\tdata.VerificationCode = true; \t   \n}"},{"id":"6c04606b-7f0d-4fdd-a79d-4c6d53c204ee","type":"go","to_node_id":"5af447a960e3271d23eab160","chTime":1525962897581}],"semaphors":[]},"title":"Проверим, возможно, это код подтверждения телефонного номера","description":"","x":1816,"y":-532,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4589182ba9606c4c65dff","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":2188,"y":-420,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af4589182ba9606c4c65dfc","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af4589182ba9606c4c65df9","id":"ff7322eb-fb01-47f7-a2dd-90a24a34e733"}]},"title":"","description":"","x":2064,"y":-532,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af445cd60e3271d23e931e3","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":2160,"y":-608,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af445cd60e3271d23e931e2","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af445cd60e3271d23e931de","id":"d0f0b91d-f5da-4fce-936e-addb87ee0d9f"}]},"title":"","description":"","x":2052,"y":-720,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af445cd60e3271d23e931de","obj_type":0,"condition":{"logics":[{"src":"if (data.canonical.Text.search(\"^(\\\\s*)?(\\\\+)?([- _():=+]?\\\\d[- _():=+]?){10,14}(\\\\s*)?$\") != -1){\n\tdata.PhoneNumber = true; \t   \n}","lang":"js","type":"api_code","err_node_id":"5af445cd60e3271d23e931df","id":"79ff7c59-f9aa-480b-af54-0e5863af11d0","lang":"js","src":"if (data.canonical.Text.search(\"^(\\\\s*)?(\\\\+)?([- _():=+]?\\\\d[- _():=+]?){10,14}(\\\\s*)?$\") != -1){\n\tdata.PhoneNumber = true; \t   \n}"},{"id":"698769c3-d80f-4450-b886-9cfafe5e419e","type":"go","to_node_id":"5af4589182ba9606c4c65df9","chTime":1525958574781}],"semaphors":[]},"title":"Проверим, возможно, это телефонный номер","description":"","x":1816,"y":-720,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa902f60e327430263e52c","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":168,"y":-340,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaa870760e32743025bf31d","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaa870760e32743025bf31f","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"b2e718ca-5adb-497a-a390-a503f21b045b"},{"type":"go_if_const","to_node_id":"5aaa870760e32743025bf31f","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"1566e4d8-a2e5-4e29-bb70-8fdd237b689f"},{"type":"go_if_const","to_node_id":"5aaa870760e32743025bf321","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"e308c2b1-18ae-4903-9ba9-b2de83f09c04"},{"type":"go_if_const","to_node_id":"5aaa870760e32743025bf321","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"94972cf5-3be6-4d4b-8b23-4c37a02e1149"},{"type":"go","to_node_id":"5aaa870760e32743025bf321","id":"98069979-5ec0-460e-92fc-09ce142a129d"}],"semaphors":[]},"title":"","description":"","x":248,"y":-200,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa902f60e327430263e528","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa902f60e327430263e521","id":"26aa3e76-2992-47e5-9049-2b6d422cebac"}]},"title":"","description":"","x":232,"y":-444,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa902f60e327430263e521","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaa902f60e327430263e527","extra":{"toString":"true"},"extra_type":{"toString":"boolean"},"group":"all","id":"14f597b8-4dab-4b8f-9811-ef64c1b40d53","conv_id":367665,"convTitle":"Get Task Body","user_id":56916},{"id":"d2f8086d-da72-44d2-8619-813bc58d5f26","type":"go","to_node_id":"5aaa870760e32743025bf318","chTime":1521127507728}],"semaphors":[]},"title":"Get message body","description":"","x":340,"y":-444,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad8975c513aa041a1022a6f","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad8975c513aa041a1022a70","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"64cecddd-fc5f-48f0-8f20-3434579cc6b7"},{"type":"go_if_const","to_node_id":"5ad8975c513aa041a1022a70","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"9adf9625-e28c-4de7-9dfc-1917a4d92de9"},{"type":"go_if_const","to_node_id":"5ad8975c513aa041a1022a72","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"99e6807d-c78c-4f51-be6c-f7ec6dd1b4f8"},{"type":"go_if_const","to_node_id":"5ad8975c513aa041a1022a72","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"63f61933-4c29-4358-955e-89a93633ff95"},{"type":"go","to_node_id":"5ad8975c513aa041a1022a72","id":"7cdb2024-1d73-4bbd-961f-209189b46ba8"}],"semaphors":[]},"title":"","description":"","x":820,"y":-704,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af4278282ba9606c49e757a","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af4278282ba9606c49e757d","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"612d6928-5e07-475e-acab-85f3464dc96e"},{"type":"go_if_const","to_node_id":"5af4278282ba9606c49e757d","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"c09acd65-a890-46c1-bfbd-2ecb9aa454e4"},{"type":"go_if_const","to_node_id":"5af4278282ba9606c49e7580","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"00f04fcf-4fb0-4630-b920-d0a26c366c1b"},{"type":"go_if_const","to_node_id":"5af4278282ba9606c49e7580","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"90057f73-f752-49e2-9a7c-209e0052efaa"},{"type":"go","to_node_id":"5af4278282ba9606c49e7580","id":"50726a99-4a42-45cf-b25c-a158d6093435"}],"semaphors":[]},"title":"","description":"","x":1268,"y":-616,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad9e6f1513aa041a1c017de","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad9e6f1513aa041a1c017e1","extra":{"ChannelName":"Facebook","ChatId":"{{entry[0].messaging[0].sender.id}}","Text":"{{entry[0].messaging[0].message.text}}","Type":"Null","UserId":"{{entry[0].messaging[0].sender.id}}","MessageId":"{{entry[0].messaging[0].message.mid}}","Date":"{{entry[0].time}}","Name":"Facebook: {{entry[0].messaging[0].sender.id}}"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string","Type":"string","UserId":"string","MessageId":"string","Date":"number","Name":"string"},"group":"","id":"3af40ebf-22f0-4bf1-9df9-6bb05c7f9110","conv_id":367757,"user_id":56916,"convTitle":"Canonical message"},{"id":"1d21ea05-a5df-4356-a21f-fae0e74928f9","type":"go","to_node_id":"5af4278282ba9606c49e7576","chTime":1525960271187}],"semaphors":[]},"title":"Create canonical message (Facebook)","description":"","x":596,"y":-628,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad8975c513aa041a1022a6e","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad8975c513aa041a1022a6f","extra":{"ChatId":"{{message.chat.id}}","UserId":"{{message.from.id}}","ChannelName":"Telegram","Text":"{{message.text}}","Type":"{{message.chat.type}}","MessageId":"{{message.message_id}}","Date":"{{message.date}}","Name":"{{message.from.first_name}} {{message.from.last_name}}"},"extra_type":{"ChatId":"string","UserId":"string","ChannelName":"string","Text":"string","Type":"string","MessageId":"string","Date":"number","Name":"string"},"group":"","id":"788b137b-f086-4946-a687-20fe0cbfcad6","conv_id":367757,"convTitle":"Canonical message","user_id":56916},{"id":"b67c6701-1c85-4c4c-a181-2cb2d2f148c4","type":"go","to_node_id":"5af4278282ba9606c49e7576","chTime":1525960267942}],"semaphors":[]},"title":"Create canonical message (Telegram)","description":"","x":596,"y":-796,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4278282ba9606c49e7576","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af4278282ba9606c49e757a","extra":{"routing_key":"1c.foxylink","type":"dt11.SocialNetwork_Users.read.sync","UserId":"{{canonical.UserId}}","ChatId":"{{canonical.ChatId}}"},"extra_type":{"routing_key":"string","type":"string","UserId":"string","ChatId":"string"},"group":"","id":"4e260d5c-3e55-48e3-a4eb-e3321da70e5c","conv_id":415637,"convTitle":"Client roles (Роли клиента)","user_id":56916},{"id":"b21351b3-7efe-4b66-8f2f-655b32c08fe6","type":"go","to_node_id":"5af3f74882ba9606c4734e22","chTime":1525960900342}],"semaphors":[]},"title":"Обновить роли клиента","description":"","x":1036,"y":-700,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad9e6f1513aa041a1c017e5","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad9e6f1513aa041a1c017de","id":"de17aa39-a66e-4588-b066-685a7e56853c"}]},"title":"","description":"","x":820,"y":-628,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad9e6f1513aa041a1c017e1","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad9e6f1513aa041a1c017e5","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"ea663cd3-3a82-4acc-b92f-ddfee5512cf5"},{"type":"go_if_const","to_node_id":"5ad9e6f1513aa041a1c017e5","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"042ea42d-30c1-429d-8db9-8ab1cc9f315d"},{"type":"go_if_const","to_node_id":"5ad9e6f1513aa041a1c017e6","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"f9d44127-386e-480b-8e14-2eb00d670339"},{"type":"go_if_const","to_node_id":"5ad9e6f1513aa041a1c017e6","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"399a792b-2ee0-41bb-bfef-9397c6389f69"},{"type":"go","to_node_id":"5ad9e6f1513aa041a1c017e6","id":"b50e68d3-1508-4909-8753-42fc570213a1"}],"semaphors":[]},"title":"","description":"","x":816,"y":-548,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaad28182ba963c286a7ff1","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaad28182ba963c286a7ff2","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"9d136391-a2cd-4163-81bb-013ea9ac0273","chTime":1524562418805},{"type":"go_if_const","to_node_id":"5aaad28182ba963c286a7ff2","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"6ee60fb2-0018-49bd-be7f-0110afcb7c6b"},{"type":"go_if_const","to_node_id":"5aaad28182ba963c286a7ff4","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"a06f9f1a-256f-4eb5-8430-59c9666ffd64","chTime":1524469745780},{"type":"go_if_const","to_node_id":"5aaad28182ba963c286a7ff4","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"55a8e814-a8f4-41b2-af5b-12f2a7a0601c"},{"type":"go","to_node_id":"5aaad28182ba963c286a7ff4","id":"5524bea3-395e-4cfb-97b5-56dfd247ecf5"}],"semaphors":[]},"title":"","description":"","x":832,"y":-884,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaad28182ba963c286a7ff2","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaad28182ba963c286a7ff0","id":"4385fbad-312c-4fba-b759-b404ebfe0842"}]},"title":"","description":"","x":832,"y":-972,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa86dff6c3765f50a68990","obj_type":0,"condition":{"logics":[{"to_node_id":"5aaad28182ba963c286a7ff0","type":"go_if_const","id":"5b4fe7a8-69bf-48cc-b700-7f4e34466418","conditions":[{"param":"{{channelId}}","const":"skype","fun":"eq","cast":"string"}],"chTime":1521125640874},{"id":"d668f2c9-23be-4df8-9aa4-80df8bbf77fa","type":"go_if_const","conditions":[{"param":"{{message}}","const":"","fun":"not_eq","cast":"string"}],"to_node_id":"5ad8975c513aa041a1022a6e","chTime":1524142630006},{"id":"c6ff8bf7-a1be-4d7e-a037-2e50282dec76","type":"go_if_const","conditions":[{"param":"{{entry[0].messaging[0].sender.id}}","const":"","fun":"not_eq","cast":"string"}],"to_node_id":"5ad9e6f1513aa041a1c017de","chTime":1524229884667},{"id":"3d78a297-e407-47d8-8b6c-95b2e36dcd29","type":"go_if_const","conditions":[{"param":"{{CSMessageID}}","const":"","fun":"not_eq","cast":"string"}],"to_node_id":"5aaaebef60e327430296c365","chTime":1525703206628},{"id":"92871197-cf7f-4351-91a0-624bd0b33903","type":"go","to_node_id":"5aaa902f60e327430263e521","chTime":1521125520949}],"semaphors":[]},"title":"","description":"","x":336,"y":-864,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaad28182ba963c286a7ff0","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaad28182ba963c286a7ff1","extra":{"ChatId":"{{conversation.id}}","UserId":"{{from.id}}","ChannelName":"Skype","Text":"{{text}}","Type":"{{type}}","MessageId":"{{id}}","Date":"{{timestamp}}","Name":"{{from.name}}"},"extra_type":{"ChatId":"string","UserId":"string","ChannelName":"string","Text":"string","Type":"string","MessageId":"string","Date":"string","Name":"string"},"group":"","id":"cbe62122-da29-484a-adb5-2a78e03f9c50","conv_id":367757,"user_id":56916,"convTitle":"Canonical message"},{"id":"59a03344-0720-4661-9aa6-d92d587124a7","type":"go","to_node_id":"5af4278282ba9606c49e7576","chTime":1525960265695}],"semaphors":[]},"title":"Create canonical message (Skype)","description":"","x":596,"y":-972,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad884c3513aa041a1f10b13","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad884c3513aa041a1f10b15","extra":{"payload":"{{canonical}}","routing_key":"1c.foxylink","type":"dt11.SocialNetwork_NewMessage.create.async","content_type":"application/json","content_encoding":"utf-8","headers":"{\"EventSource\":\"{{ChannelName}}.Bot\"}"},"extra_type":{"payload":"string","routing_key":"string","type":"string","content_type":"string","content_encoding":"string","headers":"object"},"group":"","id":"31dbdf8f-54c1-45c4-8382-8d516c7cb4e1","conv_id":367561,"user_id":56916,"convTitle":"RabbitMQ - Send message"},{"id":"e0dc7817-4e21-445f-9b8c-657d9c7038c1","type":"go","to_node_id":"5af0624060e3271d23245f96","chTime":1525703232309}],"semaphors":[]},"title":"Send to 1c.foxylink","description":"","x":1192,"y":108,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af43300513aa0242df7fbd7","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af43300513aa0242df7fbda","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"6187bfa3-22b7-415b-8f5f-fa9637c8929f"},{"type":"go_if_const","to_node_id":"5af43300513aa0242df7fbda","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"96b74b40-5e09-42eb-85b3-28dde95481aa"},{"type":"go_if_const","to_node_id":"5af43300513aa0242df7fbdc","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"289c4ca8-2f87-4c6a-8948-a262be338608"},{"type":"go_if_const","to_node_id":"5af43300513aa0242df7fbdc","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"161054f5-7d90-48d7-b319-e567f786a13f"},{"type":"go","to_node_id":"5af43300513aa0242df7fbdc","id":"710bd65f-d36b-4cb3-9ed6-a9483d52d2f6"}],"semaphors":[]},"title":"","description":"","x":1224,"y":-1092,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af444f382ba9606c4b78141","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1648,"y":-1244,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af3f7eff6c37674c9b284d6","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af3f7eff6c37674c9b284e1","extra":{"ChannelName":"{{canonical.ChannelName}}","ChatId":"{{canonical.ChatId}}","Text":"Доброго времени суток {{Partner.Description}}! Чем могу быть полезен?"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"46c1eb78-98eb-4a17-91e1-1dc8b075683a","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"a36ca355-48d2-4b4e-8229-3e34a7412c94","type":"go","to_node_id":"5af444f382ba9606c4b78141","chTime":1525957875154}],"semaphors":[]},"title":"Послать персональное приветственное сообщение","description":"","x":1744,"y":-1164,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4348ef6c37674c9ea59a5","obj_type":0,"condition":{"logics":[{"to_node_id":"5af3f7eff6c37674c9b284d6","type":"go_if_const","id":"a3da24f5-d6e6-4a87-9188-8290321b1870","conditions":[{"param":"{{Partner}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1525953703392},{"id":"15b07536-db99-433f-9d95-64a1174f7b42","type":"go","to_node_id":"5af43300513aa0242df7fbd6","chTime":1525953706227}],"semaphors":[]},"title":"","description":"","x":1528,"y":-964,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af43300513aa0242df7fbdc","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1140,"y":-1068,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af43300513aa0242df7fbda","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af43300513aa0242df7fbd6","id":"e95f1427-9019-48a0-bddf-6c46906190ab"}]},"title":"","description":"","x":1228,"y":-1172,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa870760e32743025bf318","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaa870760e32743025bf31d","extra":{"payload":"{{payload}}","routing_key":"1c.foxylink.invalid","type":"invalid"},"extra_type":{"payload":"string","routing_key":"string","type":"string"},"group":"","id":"73d2d41c-6ee3-4832-bd6e-d5a99e4bb807","conv_id":367561,"convTitle":"RabbitMQ - Send message","user_id":56916},{"id":"1e27b0d7-379f-45e2-8837-33de73047a94","type":"go","to_node_id":"5af14b0382ba9606c445cbf2","chTime":1521125140945}],"semaphors":[]},"title":"Log unknown message","description":"","x":340,"y":-264,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af3f7eff6c37674c9b284e1","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af3f7eff6c37674c9b284e4","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"524e5451-3810-4c44-bb84-0e57931077da","chTime":1525944786977},{"type":"go_if_const","to_node_id":"5af3f7eff6c37674c9b284e4","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"4d8b27bc-84f1-4332-9edc-f5a58ebd9cd9"},{"type":"go_if_const","to_node_id":"5af3f7eff6c37674c9b284eb","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"13b7ee05-f236-426a-96b2-a9beb6555883"},{"type":"go_if_const","to_node_id":"5af3f7eff6c37674c9b284eb","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"416c9f98-9b31-4faa-8354-dbb051e3c158"},{"type":"go","to_node_id":"5af3f7eff6c37674c9b284eb","id":"0251a610-09c2-4144-9f99-d0b2883dab86"}],"semaphors":[]},"title":"","description":"","x":1972,"y":-1076,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad884c3513aa041a1f10b17","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1132,"y":292,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af4278282ba9606c49e7580","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1388,"y":-588,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af4278282ba9606c49e757d","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af4278282ba9606c49e7576","id":"159803c0-d686-467e-8405-f5c4c0d42f5f"}]},"title":"","description":"","x":1268,"y":-704,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa490c60e3274302208162","obj_type":1,"condition":{"logics":[{"id":"ce1987e4-2c99-4eec-8482-28ca3a2d9588","type":"go","to_node_id":"5aaa86dff6c3765f50a68990","chTime":1525951279069}],"semaphors":[]},"title":"Start","description":"","x":436,"y":-936,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af3f74882ba9606c4734e22","obj_type":0,"condition":{"logics":[{"to_node_id":"5af4348ef6c37674c9ea59a5","type":"go_if_const","id":"c9ba0755-1030-4b39-ac36-df22e9133694","conditions":[{"param":"{{canonical.Text}}","const":"/start|start|/Start|Start","fun":"regexp","cast":"string"}],"chTime":1525960903583},{"id":"e6843019-a860-4ea5-ac0b-f610fff07dce","type":"go_if_const","conditions":[{"param":"{{Partner}}","const":"","fun":"eq","cast":"string"}],"to_node_id":"5af445cd60e3271d23e931de","chTime":1525962762860},{"id":"f08f901b-428c-44d0-afe0-de757ca9361a","type":"go","to_node_id":"5ad884c3513aa041a1f10b13","chTime":1525963053010}],"semaphors":[]},"title":"","description":"","x":1528,"y":-832,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af3f7eff6c37674c9b284eb","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":2104,"y":-1044,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af3f7eff6c37674c9b284e4","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af3f7eff6c37674c9b284d6","id":"61e2adb9-afb7-4280-b207-b428af819631"}]},"title":"","description":"","x":1976,"y":-1164,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14b0382ba9606c445cbf2","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"d63624f3-66b3-4298-a6cc-43f92ee85602"},{"id":"8267275f-d7d5-4f04-91ac-364b99a9aeff","type":"go","to_node_id":"5aaa490c60e327430220816a","chTime":1525762819488}],"semaphors":[]},"title":"","description":"","x":340,"y":-96,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaa490c60e327430220816a","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Undefined channel","description":"","x":440,"y":56,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aaaebef60e327430296c365","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaaebef60e327430296c366","extra":{"ChatId":"{{ChatId}}","Text":"{{Text}}","ChannelName":"{{ChannelName}}","UserId":"{{UserId}}","Description":"{{Description}}","CSMessageID":"{{CSMessageID}}"},"extra_type":{"ChatId":"string","Text":"string","ChannelName":"string","UserId":"string","Description":"string","CSMessageID":"string"},"group":"","id":"0e567ca4-6057-47c1-8466-404c968311c1","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"84e48a56-c651-46e6-a0fd-f9418d9c1904","type":"go","to_node_id":"5aaa890f513aa028cca393d7","chTime":1525703211152}],"semaphors":[]},"title":"Reply message from 1C:Enterprise","description":"","x":64,"y":-868,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af0624060e3271d23245f96","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1292,"y":356,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aaad28182ba963c286a7ff4","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":948,"y":-856,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaaebef60e327430296c369","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaaebef60e327430296c365","id":"dee33b8b-0ff2-492e-9a6a-a0a608bc7835"}]},"title":"","description":"","x":-28,"y":-868,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad9e6f1513aa041a1c017e6","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":948,"y":-520,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad884c3513aa041a1f10b16","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad884c3513aa041a1f10b13","id":"7a3640ac-ddd4-4fd7-9119-6b7d1b1a0d10"}]},"title":"","description":"","x":1104,"y":108,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaaebef60e327430296c36a","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":-96,"y":-760,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaaebef60e327430296c366","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaaebef60e327430296c369","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"063f9ed5-47b8-43fc-a05a-dbfb59dc35a9"},{"type":"go_if_const","to_node_id":"5aaaebef60e327430296c369","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"335138b4-60d7-425b-8729-97b08928347f"},{"type":"go_if_const","to_node_id":"5aaaebef60e327430296c36a","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"83cb0b6b-a12f-4490-9606-d752081de8d7"},{"type":"go_if_const","to_node_id":"5aaaebef60e327430296c36a","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"f1795fe9-b64f-4f1c-b00c-d4bf470715fa"},{"type":"go","to_node_id":"5aaaebef60e327430296c36a","id":"d61b25b6-9f5f-43a1-bc24-5e8307a8ce3d"}],"semaphors":[]},"title":"","description":"","x":-28,"y":-788,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa870760e32743025bf321","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":180,"y":-172,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad8975c513aa041a1022a72","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":948,"y":-676,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad8975c513aa041a1022a70","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad8975c513aa041a1022a6e","id":"2efaabdd-ddae-4fd3-914a-1ff1687c1ee9"}]},"title":"","description":"","x":820,"y":-796,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa870760e32743025bf31f","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaa870760e32743025bf318","id":"7959eb0a-ac14-4977-be63-63c611f3a6ae"}]},"title":"","description":"","x":248,"y":-276,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaa890f513aa028cca393d7","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":164,"y":-664,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[{"367495_5ab4096360e3276bf4b2d572":[510.0000305175781,115.00000381469727],"367495_5ab4096360e3276bf4b2d574":[510.0000305175781,175.00000381469727],"367495_5ab4096360e3276bf4b2d573":[570.0000305175781,115.00000381469727],"367495_5ab4096360e3276bf4b2d56b":[330.0000305175781,115.00000381469727],"367495_5ab3a3bf82ba9627fe62e688":[510.0000305175781,115.00000381469727],"367495_5ab3a3bf82ba9627fe62e68a":[510.0000305175781,175.00000381469727],"367495_5ab3a3bf82ba9627fe62e689":[570.0000305175781,115.00000381469727],"367495_5ab3a3bf513aa03a3466920e":[330.0000305175781,115.00000381469727],"367495_5aaa490c60e327430220816a":[224,144],"367495_5aaa490c60e3274302208162":[724,-300],"367495_5aaa890f513aa028cca393d7":[1172,412],"367495_5aaa870760e32743025bf321":[-80,60],"367495_5aaa902f60e327430263e521":[124,-216],"367495_5aaa902f60e327430263e528":[-24,-224],"367495_5aaa902f60e327430263e52c":[-92,-116],"367495_5aaa902f60e327430263e527":[-24,-144],"367495_5aaa870760e32743025bf318":[124,-44],"367495_5aaa870760e32743025bf31f":[-20,-48],"367495_5aaa870760e32743025bf31d":[-20,32],"367495_5aaad28182ba963c286a7ff2":[1404,-176],"367495_5aaad2f0513aa028ccd676fc":[1324,32],"367495_5aaad2f0513aa028ccd67724":[1436,140],"367495_5aaad28182ba963c286a7ff4":[1536,-60],"367495_5aaad28182ba963c286a7ff1":[1400,-88],"367495_5aaad28182ba963c286a7ff0":[1072,-144],"367495_5aaad2f0513aa028ccd676f2":[1324,112],"367495_5aaad2ef513aa028ccd6769d":[1072,32],"367495_5aaaebef60e327430296c366":[1316,288],"367495_5aaaebef60e327430296c36a":[1448,316],"367495_5aaaebef60e327430296c369":[1316,196],"367495_5aaaebef60e327430296c365":[1072,196],"367495_5aaa86dff6c3765f50a68990":[624,-212],"367495_5ab3a3bf513aa03a3466920e":[null,null]},{"367495_5ab4096360e3276bf4b2d572":"collapse","367495_5ab4096360e3276bf4b2d574":"collapse","367495_5ab4096360e3276bf4b2d573":"collapse","367495_5ab4096360e3276bf4b2d56b":"expand","367495_5ab3a3bf82ba9627fe62e688":"collapse","367495_5ab3a3bf82ba9627fe62e68a":"collapse","367495_5ab3a3bf82ba9627fe62e689":"collapse","367495_5ab3a3bf513aa03a3466920e":"expand"}]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":415894,"parent_id":214684,"title":"GMS-Worldwide - Send message","description":"","status":"active","params":[{"name":"VerificationCode","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"PhoneNumber","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af6951f82ba9606c4b8ad61","obj_type":0,"condition":{"logics":[{"src":"var Settings = {};\nSettings.PhoneNumber = Number(\"38\" + data.PhoneNumber);\nSettings.Tag = \"ClientAuth\";\nSettings.viber = true;\nSettings.ViberText = \"Код авторизации: \" + data.VerificationCode;\nSettings.Caption = \"Завершить авторизацию\";\nSettings.sms = false;\n\nvar payload = {};\npayload.Settings = Settings;\n\ndata.payload = payload;\n","lang":"js","type":"api_code","err_node_id":"5af6951f82ba9606c4b8ad63","id":"e2401d6d-1517-4e56-ab0f-1d73eceda31f","lang":"js","src":"var Settings = {};\nSettings.PhoneNumber = Number(\"38\" + data.PhoneNumber);\nSettings.Tag = \"ClientAuth\";\nSettings.viber = true;\nSettings.ViberText = \"Код авторизации: \" + data.VerificationCode;\nSettings.Caption = \"Завершить авторизацию\";\nSettings.sms = false;\n\nvar payload = {};\npayload.Settings = Settings;\n\ndata.payload = payload;\n"},{"id":"0d9d0b52-4f1b-4387-b583-8a5909a8fa64","type":"go","to_node_id":"5af698d3f6c37674c90596db","chTime":1526110599883}],"semaphors":[]},"title":"","description":"","x":772,"y":-32,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af698d3f6c37674c90596dc","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af698d3f6c37674c90596dd","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"8ec88494-683e-4e5f-b31c-7ffd87405a63"},{"type":"go_if_const","to_node_id":"5af698d3f6c37674c90596dd","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"1441feb8-672e-472e-acd0-86255f307e5d"},{"type":"go_if_const","to_node_id":"5af693ef513aa0242d12cdf8","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"e4d234ff-6539-48a9-9f61-ce319cef95e8","chTime":1526110428311},{"type":"go_if_const","to_node_id":"5af693ef513aa0242d12cdf8","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"4ee7a466-bb67-4857-89c0-6fb58302a549","chTime":1526110429829},{"id":"10ad3db4-c296-4df9-bf1c-ded8483acdc0","type":"go","to_node_id":"5af693ef513aa0242d12cdf8","chTime":1526110431420}],"semaphors":[]},"title":"","description":"","x":1020,"y":224,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af698d3f6c37674c90596db","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af698d3f6c37674c90596dc","extra":{"payload":"{{payload}}","routing_key":"1c.foxylink","type":"dt11.gms-worldwide.send.async"},"extra_type":{"payload":"string","routing_key":"string","type":"string"},"group":"","id":"5c516975-2c3b-409a-95f5-a2f944d45040","conv_id":367561,"convTitle":"RabbitMQ - Send message","user_id":56916},{"id":"11a8188b-29de-402f-a181-f390b8fafb6a","type":"go","to_node_id":"5af693ef513aa0242d12cdf2","chTime":1526110615766}],"semaphors":[]},"title":"Send message","description":"","x":768,"y":140,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdf8","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"bc6c0c53-5973-44fc-9581-e7077dbbec38"},{"id":"32263f6a-401f-4ace-bd7f-e4b0be6bf2ad","type":"go","to_node_id":"5af693ef513aa0242d12cdfd","chTime":1521179581016}],"semaphors":[]},"title":"","description":"","x":1120,"y":224,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdfc","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":872,"y":424,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af693ef513aa0242d12cdf2","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"31d0ce1b-4c81-4936-bb0c-d8d918d1d862"},{"id":"e1bcca59-952d-4a5c-b732-46a8ef784163","type":"go","to_node_id":"5af693ef513aa0242d12cdfc","chTime":1521152110246}],"semaphors":[]},"title":"","description":"","x":840,"y":308,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdfd","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Send message: Other Errors","description":"","x":1252,"y":252,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af698d3f6c37674c90596dd","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af698d3f6c37674c90596db","id":"e56b3c56-66b9-474f-9141-8d40163c05e3"}]},"title":"","description":"","x":1020,"y":140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6951f82ba9606c4b8ad64","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af6951f82ba9606c4b8ad61","id":"c7c89b48-77d1-43fe-b80c-39565020303d"}]},"title":"","description":"","x":1004,"y":-32,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6951f82ba9606c4b8ad63","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af6951f82ba9606c4b8ad64","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"6eee72f1-890f-4819-8df1-eb903ca32496"},{"type":"go_if_const","to_node_id":"5af6951f82ba9606c4b8ad65","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"b24202c0-34fb-4e1f-9d13-7ab4768fa62a"},{"type":"go","to_node_id":"5af6951f82ba9606c4b8ad65","id":"3ee68037-4a39-4efd-809b-070e24de6156"}],"semaphors":[]},"title":"","description":"","x":1004,"y":56,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6951f82ba9606c4b8ad65","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1192,"y":84,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af693ef513aa0242d12cdff","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5af693ef513aa0242d12cdf6","id":"eae789ec-2317-49f8-beb7-68568163db29"}],"semaphors":[]},"title":"Start","description":"","x":872,"y":-284,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdf7","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"d7b3a81e-70b1-4945-a5cd-be7882fb8f96","exception_reason":"Cannot set authorization credentials"},{"id":"b8a1cc65-8b2c-46e1-a1a1-2cbcf964dab4","type":"go","to_node_id":"5af693ef513aa0242d12cdfb","chTime":1521178893026}],"semaphors":[]},"title":"","description":"","x":996,"y":-152,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdf6","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"Authorization":"{{conv[367769].ref[gsm_ww_credentials].Authorization}}"},"extra_type":{"Authorization":"string"},"err_node_id":"5af693ef513aa0242d12cdf7","id":"cdcf54bd-16b3-4cb0-b75d-925a80f6c655"},{"id":"df7389c0-92ea-4280-a43d-6b42c9bcb379","type":"go","to_node_id":"5af6951f82ba9606c4b8ad61","chTime":1521151261018}],"semaphors":[]},"title":"Get authorization credentials","description":"","x":772,"y":-216,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af693ef513aa0242d12cdfb","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Authorization: Other Errors","description":"","x":1112,"y":-124,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":410873,"parent_id":214684,"title":"GMS-Worldwide","description":"Viber (callback url)","status":"active","params":null,"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5ae0b4edf6c376424170b15c","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ae0b4edf6c376424170b15e","extra":{"app_id":"gms-worldwide","content_encoding":"application/json","content_type":"utf-8","payload":"{{canonical}}","routing_key":"test","type":"yt11.gms-worldwide.update.async","correlation_id":"{{message_id}}"},"extra_type":{"app_id":"string","content_encoding":"string","content_type":"string","payload":"string","routing_key":"string","type":"string","correlation_id":"string"},"group":"","id":"dcfb81d7-8f8e-461e-917e-57e1ad2eb9bd","conv_id":367561,"user_id":56916},{"id":"aa7c484e-1880-4866-8d73-d9caaccdaf8d","type":"go","to_node_id":"5ae0b47a82ba9636616f2a79","chTime":1524675821950}],"semaphors":[]},"title":"Send message body to RabbitMQ channel","description":"","x":768,"y":352,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ae0ba1e60e3277ba8a09c2b","obj_type":0,"condition":{"logics":[{"src":"var canonical = {};\ncanonical.ExtraId = data.extra_id;\ncanonical.HyberStatus = data.hyber_status;\ncanonical.MessageId = data.message_id;\ncanonical.Number = data.number;\ncanonical.SentVia = data.sent_via;\ncanonical.Status = data.status;\ncanonical.SubStatus = data.substatus;\ncanonical.Time = data.time;\ndata.canonical = canonical;","lang":"js","type":"api_code","err_node_id":"5ae0ba1e60e3277ba8a09c2c","id":"17b9454f-120f-4bc1-bca3-087c841efbd9","lang":"js","src":"var canonical = {};\ncanonical.ExtraId = data.extra_id;\ncanonical.HyberStatus = data.hyber_status;\ncanonical.MessageId = data.message_id;\ncanonical.Number = data.number;\ncanonical.SentVia = data.sent_via;\ncanonical.Status = data.status;\ncanonical.SubStatus = data.substatus;\ncanonical.Time = data.time;\ndata.canonical = canonical;"},{"id":"53831bb6-875e-4d2a-bbc4-ede754a69576","type":"go","to_node_id":"5ae0b4edf6c376424170b15c","chTime":1524677451351}],"semaphors":[]},"title":"","description":"","x":768,"y":-84,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ae0ba1e60e3277ba8a09c2e","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1152,"y":36,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ae0ba1e60e3277ba8a09c2d","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ae0ba1e60e3277ba8a09c2b","id":"4fb91ce6-bbf1-4b01-9120-191a16348ef0"}]},"title":"","description":"","x":1020,"y":-84,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ae0ba1e60e3277ba8a09c2c","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ae0ba1e60e3277ba8a09c2d","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"1b279621-4a54-4b6b-9787-ae9049ce2a14"},{"type":"go_if_const","to_node_id":"5ae0ba1e60e3277ba8a09c2e","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"abe3ef6b-d016-4749-9808-de6211ce0258"},{"type":"go","to_node_id":"5ae0ba1e60e3277ba8a09c2e","id":"8c6706a8-2e73-44c8-a6ca-208788be741c"}],"semaphors":[]},"title":"","description":"","x":1020,"y":8,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ae0b4edf6c376424170b160","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ae0b4edf6c376424170b15c","id":"84f3da7d-9695-46aa-8511-144ce62b44e6"}]},"title":"","description":"","x":1020,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ae0b4edf6c376424170b15e","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ae0b4edf6c376424170b160","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"40a82515-232c-4e6c-b2cc-37f2e25a9592"},{"type":"go_if_const","to_node_id":"5ae0b4edf6c376424170b160","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"c83a8447-6a09-44cc-a723-2145b8420e45"},{"type":"go_if_const","to_node_id":"5ae0b4edf6c376424170b161","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"fd23b042-592d-4944-bcbe-6dd86f61cbbe"},{"type":"go_if_const","to_node_id":"5ae0b4edf6c376424170b161","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"6694d699-b750-4465-8b40-93769f5aa450"},{"type":"go","to_node_id":"5ae0b4edf6c376424170b161","id":"94eed00f-a421-4860-a679-23c3e89e7190"}],"semaphors":[]},"title":"","description":"","x":1020,"y":444,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ae0b4edf6c376424170b161","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1152,"y":472,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ae0b47a82ba9636616f2a79","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":868,"y":556,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5ae0b47a82ba9636616f2a76","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5ae0ba1e60e3277ba8a09c2b","id":"9ad2121a-2131-421f-88d7-5e5042fd81fd"}],"semaphors":[]},"title":"Start","description":"","x":868,"y":-160,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":214684,"parent_id":199282,"title":"Viber\\SMS","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":373380,"parent_id":199284,"title":"Telegram - Send message","description":"","status":"active","params":[{"name":"Text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5ab3a52882ba9627fe6418f7","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":880,"y":716,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5ab3a52882ba9627fe6418f4","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5ab3a53d82ba9627fe642b01","id":"242364d5-a891-458a-b4da-40432a96ebe0"}],"semaphors":[]},"title":"Start","description":"","x":880,"y":100,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab3a53d82ba9627fe642b01","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"token":"{{conv[367769].ref[telegram_token].access_token}}"},"extra_type":{"token":"string"},"err_node_id":"5ab3a579513aa03a34681a8e","id":"f6da93f4-4112-451a-b06c-ccc35c641860"},{"id":"024738c5-aa75-4dfb-8ab1-28088eea9208","type":"go","to_node_id":"5ab3a59782ba9627fe6473d0","chTime":1521722673936}],"semaphors":[]},"title":"Get telegram token","description":"","x":780,"y":164,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab3a53d82ba9627fe642b03","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Telegram Token: Other Errors","description":"","x":1344,"y":232,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ab3a579513aa03a34681a8e","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"82d68b40-096b-4f9f-a9c3-8ab742aea816","exception_reason":"Cannot set telegram token"},{"id":"2dafb14e-b365-4e4e-aac8-1cfce55e987a","type":"go","to_node_id":"5ab3a53d82ba9627fe642b03","chTime":1521722733537}],"semaphors":[]},"title":"Cannot set telegram token","description":"","x":1056,"y":208,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab3a59782ba9627fe6473d0","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5ab3a59782ba9627fe6473d2","format":"","method":"POST","url":"https://api.telegram.org/bot{{token}}/sendMessage","extra":{"text":"{{Text}}","chat_id":"{{ChatId}}"},"extra_type":{"text":"string","chat_id":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":true,"cert_pem":"","content_type":"application/json","id":"36272744-6d4e-493f-9f78-373acc3f3157","is_migrate":true},{"id":"db2264c1-d057-4a1e-9471-ae1df37c2874","type":"go","to_node_id":"5ab3a72760e3276bf46e0a0f","chTime":1521722770387}],"semaphors":[]},"title":"Send message","description":"","x":780,"y":360,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab3a59782ba9627fe6473d5","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ab3a59782ba9627fe6473d0","id":"a1b69a39-30ea-4fe1-a81a-a170ca568b77"}]},"title":"","description":"","x":1032,"y":360,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab3a6b982ba9627fe65621e","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Send message: Other Errors","description":"","x":1464,"y":480,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ab3a6cd82ba9627fe657198","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false","message":"{{message}}"},"res_data_type":{"success":"boolean","message":"string"},"mode":"key_value","throw_exception":true,"id":"f50ba9e8-b979-40ca-b7c5-72d5dd720726"},{"id":"734bf93f-8934-4a51-9e44-5e38a8433fea","type":"go","to_node_id":"5ab3a6b982ba9627fe65621e","chTime":1521723098304}],"semaphors":[]},"title":"","description":"","x":1152,"y":452,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab3a59782ba9627fe6473d2","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ab3a59782ba9627fe6473d5","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"ee04270e-5dc0-4578-b460-1b5ca1ce993f"},{"type":"go_if_const","to_node_id":"5ab3a6cd82ba9627fe657198","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"4b3fa19b-e28b-464e-8aea-88c4df6070a0","chTime":1521723089379},{"type":"go_if_const","to_node_id":"5ab3a59782ba9627fe6473d5","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"e3018579-97b3-4ee8-8010-13fc5961d4d9"},{"id":"9898355f-fd3e-4426-b792-7723068d9032","type":"go","to_node_id":"5ab3a6cd82ba9627fe657198","chTime":1521723082887}],"semaphors":[]},"title":"","description":"","x":1032,"y":440,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab3a72760e3276bf46e0a0f","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"{{ok}}","Type":"{{result.chat.type}}","Date":"{{result.date}}","MessageId":"{{result.message_id}}"},"res_data_type":{"success":"boolean","Type":"string","Date":"number","MessageId":"string"},"mode":"key_value","throw_exception":false,"id":"5a69abff-51f2-4a5c-bf8d-5a53ed0dba99"},{"id":"d086aa01-9c42-4f16-8254-2069d096d4d6","type":"go","to_node_id":"5ab3a52882ba9627fe6418f7","chTime":1521723170335}],"semaphors":[]},"title":"","description":"","x":780,"y":536,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":199284,"parent_id":199282,"title":"Telegram","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":415790,"parent_id":199282,"title":"Client Authorize (Авторизация клиента)","description":"","status":"active","params":[{"name":"ChannelName","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"PhoneNumber","type":"string","descr":"","flags":["input"],"regex":"","regex_error_text":""},{"name":"UserId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"VerificationCode","type":"string","descr":"","flags":["input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af578bc513aa0242d9dd12c","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af578bc513aa0242d9dd12e","extra":{"ChannelName":"{{ChannelName}}","ChatId":"{{ChatId}}","Text":"Не удалось авторизироваться, повторите попытку позже..."},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"eb7db6ed-502d-4920-82fe-dd9dd4d8db8b","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"cb1d31b3-39f6-498e-a5ab-88cfcbeac317","type":"go","to_node_id":"5af5794f82ba9606c447eb05","chTime":1526036820104}],"semaphors":[]},"title":"Авторизация не удалась","description":"","x":104,"y":1012,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af6a63160e3271d23f3ea3d","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af6a63160e3271d23f3ea35","id":"416a153b-a501-4c54-9da2-8f15fc6e992b"}]},"title":"","description":"","x":1600,"y":968,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6a63160e3271d23f3ea3a","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af6a63160e3271d23f3ea3d","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"5b106c0a-a449-4919-a39d-b6d0d6372c0a"},{"type":"go_if_const","to_node_id":"5af6a63160e3271d23f3ea3d","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"84d581b0-5a84-4f8b-9cea-c40c995414e9"},{"type":"go_if_const","to_node_id":"5af6a676f6c37674c90df38b","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"eee6acce-c8b3-46dc-9e1d-e673ffed58dc"},{"type":"go_if_const","to_node_id":"5af6a676f6c37674c90df38b","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"5d7fbade-0d2f-4119-8ec8-7d57c6ea0393"},{"type":"go","to_node_id":"5af6a676f6c37674c90df38b","id":"a6ef0b37-6533-4521-9ab8-78b87f0c6d27"}],"semaphors":[]},"title":"","description":"","x":1600,"y":1060,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6a676f6c37674c90df38b","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"99323d03-3310-44e5-86cd-390b5d84cd9c"},{"id":"40296e6e-9c2c-4f5b-9231-7959707fa2cf","type":"go","to_node_id":"5af6a68a513aa0242d1e3da8","chTime":1526113933269}],"semaphors":[]},"title":"","description":"","x":1708,"y":1060,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af6a68a513aa0242d1e3da8","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1836,"y":1088,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af6a63160e3271d23f3ea35","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af6a63160e3271d23f3ea3a","extra":{"VerificationCode":"{{Partner.VerificationCode}}","PhoneNumber":"{{PhoneNumber}}"},"extra_type":{"VerificationCode":"string","PhoneNumber":"string"},"group":"","id":"fb945617-1a6c-4e5b-b391-3ab3fae1d767","conv_id":415894,"convTitle":"GMS-Worldwide - Send message","user_id":56916},{"id":"b10c7d3b-6d3d-46d7-ae17-4c400342b006","type":"go","to_node_id":"5af55e1582ba9606c43055db","chTime":1526113887705}],"semaphors":[]},"title":"Отправляем сообщение авторизации","description":"","x":1352,"y":988,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af574a2f6c37674c98a9c3e","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"199f865e-4358-4e4b-8e37-c3847b683a94"},{"id":"8c1753d5-a52b-4eb9-93df-511bfc526bd4","type":"go","to_node_id":"5af556d160e3271d235b42bd","chTime":1526035621799}],"semaphors":[]},"title":"","description":"","x":756,"y":216,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af574f7513aa0242d9a8467","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af574f7513aa0242d9a8468","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"acd10f07-beb4-4b24-9aff-b7666d7cd3d4"},{"type":"go_if_const","to_node_id":"5af574f7513aa0242d9a8468","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"e12acdef-9016-47c4-aeb8-de53fbeb557b"},{"type":"go_if_const","to_node_id":"5af57648f6c37674c98c092e","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"8d2112a4-f32a-429d-b643-f44f171e759d"},{"type":"go_if_const","to_node_id":"5af57648f6c37674c98c092e","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"2f735867-173a-4897-9dab-8199845463b4"},{"type":"go","to_node_id":"5af57648f6c37674c98c092e","id":"2535c198-02e8-408e-872b-d64f3cc0facc"}],"semaphors":[]},"title":"","description":"","x":624,"y":648,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5772182ba9606c44617e4","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af5772182ba9606c44617e6","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"5307f610-8bdd-4912-9528-1d1f688bbf8e"},{"type":"go_if_const","to_node_id":"5af57727513aa0242d9c6f10","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"a9950dba-ba63-4327-b7f6-3284bd6fe695"},{"type":"go","to_node_id":"5af57727513aa0242d9c6f10","id":"4d73f86f-0f38-4e2e-b174-56206eaf03df"}],"semaphors":[]},"title":"","description":"","x":624,"y":428,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5782c513aa0242d9d53c9","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af5782c513aa0242d9d53ca","extra":{"ChannelName":"{{ChannelName}}","ChatId":"{{ChatId}}","Text":"Вы успешно прошли авторизацию"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"8710380a-044d-40b4-b0c0-41138a90acea","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"66316ae8-4119-4115-87bd-6888d2fc69ed","type":"go","to_node_id":"5af55e46f6c37674c97642ea","chTime":1526036596259}],"semaphors":[]},"title":"Сообщить об успехе авторизации","description":"","x":688,"y":996,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5795782ba9606c447f116","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":204,"y":1304,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af5794f82ba9606c447eb05","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"b7b2568d-4a0a-4b3d-a12d-5808d1ee01ea"},{"id":"3f4bd35f-51bb-459e-b285-563d4f38844c","type":"go","to_node_id":"5af5795782ba9606c447f116","chTime":1526036827039}],"semaphors":[]},"title":"","description":"","x":176,"y":1176,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af578c782ba9606c4477a8a","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"e0e3ae15-e778-4e26-b07c-73d391935c73"},{"id":"0412f7a0-f56f-4bd2-8b8a-e627c7690669","type":"go","to_node_id":"5af578bc513aa0242d9dd131","chTime":1526036693415}],"semaphors":[]},"title":"","description":"","x":-64,"y":1096,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af578bc513aa0242d9dd131","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":-120,"y":1124,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af578bc513aa0242d9dd12f","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af578bc513aa0242d9dd12c","id":"d534a26f-4518-407d-bb54-5fee3930f040"}]},"title":"","description":"","x":8,"y":1012,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af578bc513aa0242d9dd12e","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af578bc513aa0242d9dd12f","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"a5bf80f2-72e6-4bcc-b765-91ffb844d28d"},{"type":"go_if_const","to_node_id":"5af578bc513aa0242d9dd12f","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"da096977-f4ae-4969-be42-96bb395bdc91"},{"type":"go_if_const","to_node_id":"5af578c782ba9606c4477a8a","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"47a87b3c-78ad-4133-9413-e4fdb482b093"},{"type":"go_if_const","to_node_id":"5af578c782ba9606c4477a8a","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"c156076d-c61f-41df-8870-5da0a6afb62a"},{"type":"go","to_node_id":"5af578c782ba9606c4477a8a","id":"de941745-81d6-433c-9b47-0acc80c8b9e4"}],"semaphors":[]},"title":"","description":"","x":8,"y":1096,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5782c513aa0242d9d53ca","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af5782c513aa0242d9d53cb","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"94fadbdc-3f1b-45d0-bc34-4df7587fe56c"},{"type":"go_if_const","to_node_id":"5af5782c513aa0242d9d53cb","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"b9d30d58-09f2-4150-b29e-0539c4348b3b"},{"type":"go_if_const","to_node_id":"5af5787ff6c37674c98dfb0b","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"3b7d3b23-b838-4da8-8118-4599b7505957"},{"type":"go_if_const","to_node_id":"5af5787ff6c37674c98dfb0b","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"3ccd424d-5bfd-40cc-81e1-c9bc0e9a52ad"},{"type":"go","to_node_id":"5af5787ff6c37674c98dfb0b","id":"a9301233-ce5c-46a2-88ce-075eae7716e0"}],"semaphors":[]},"title":"","description":"","x":936,"y":1088,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5787ff6c37674c98dfb0b","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"f358ba4c-fd9a-4eb2-b156-5751c38f2921"},{"id":"f48d979d-75ec-4992-849d-de5a57674e44","type":"go","to_node_id":"5af5782c513aa0242d9d53cd","chTime":1526036619705}],"semaphors":[]},"title":"","description":"","x":936,"y":1164,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5782c513aa0242d9d53cd","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":964,"y":1268,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5782c513aa0242d9d53cb","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af5782c513aa0242d9d53c9","id":"c23b708a-c305-4b2e-b38e-b2af9e8fe757"}]},"title":"","description":"","x":936,"y":996,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5780b60e3271d23781b8c","obj_type":0,"condition":{"logics":[{"to_node_id":"5af5782c513aa0242d9d53c9","type":"go_if_const","id":"eb874ee1-b34e-4038-b22f-6ca6a90c2c77","conditions":[{"param":"success","const":"true","fun":"eq","cast":"boolean"}],"chTime":1526036591558},{"id":"076eeb03-df0d-43a1-9fb9-ed1575272980","type":"go","to_node_id":"5af578bc513aa0242d9dd12c","chTime":1526036757409}],"semaphors":[]},"title":"","description":"","x":396,"y":868,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af57727513aa0242d9c6f10","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"8dc258cd-4a41-41f0-afd8-548b0e8c6301"},{"id":"b3783c94-1138-4a6b-8bb8-908e4107c6cf","type":"go","to_node_id":"5af5772182ba9606c44617e8","chTime":1526036278798}],"semaphors":[]},"title":"","description":"","x":624,"y":504,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5772182ba9606c44617e8","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":740,"y":532,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5772182ba9606c44617e6","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af5772182ba9606c44617e3","id":"1a6f453c-8410-4388-8580-00133fc1b987"}]},"title":"","description":"","x":624,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5772182ba9606c44617e3","obj_type":0,"condition":{"logics":[{"src":"var obj = {};\nobj.Partner = data.Partner;\nobj.ChannelName = data.ChannelName;\nobj.ChatId = data.ChatId;\nobj.UserId = data.UserId;\nobj.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Object = obj;\ndata.payload = payload;","lang":"js","type":"api_code","err_node_id":"5af5772182ba9606c44617e4","id":"6eb9c25f-29e2-4a2b-8828-fbfc960d12d7","lang":"js","src":"var obj = {};\nobj.Partner = data.Partner;\nobj.ChannelName = data.ChannelName;\nobj.ChatId = data.ChatId;\nobj.UserId = data.UserId;\nobj.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Object = obj;\ndata.payload = payload;"},{"id":"b0bbfe18-1096-4910-877d-f3727af44e10","type":"go","to_node_id":"5af574f7513aa0242d9a8466","chTime":1526036450543}],"semaphors":[]},"title":"Создаем тело сообщения","description":"","x":396,"y":352,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5766482ba9606c4457b74","obj_type":0,"condition":{"logics":[{"type":"api_callback","is_sync":true,"id":"bdb17642-dfc4-42ea-8185-b7be43450c4c","obj_id_path":"TaskId"},{"id":"3ecbe19e-9c33-43c8-925e-dc3a89450b23","type":"go","to_node_id":"5af5780b60e3271d23781b8c","chTime":1526036643724}],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af578bc513aa0242d9dd12c","id":"8e9d21cc-f2c3-495a-9ebf-46b19bc527da","chTime":1526036753375}]},"title":"","description":"","x":396,"y":716,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af57648f6c37674c98c092e","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"a52124fb-49be-4bb2-991e-801e3dd9c519"},{"id":"54df2a03-d750-4ccc-8ee8-4212bdbe5017","type":"go","to_node_id":"5af574f7513aa0242d9a846a","chTime":1526036044497}],"semaphors":[]},"title":"","description":"","x":624,"y":732,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af575d082ba9606c444fbec","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"300de38d-fba3-4df1-a6c3-099f32f7b4a9"},{"id":"53b86b11-da88-4f09-9c10-5199531fbad1","type":"go","to_node_id":"5af5750260e3271d23758f3b","chTime":1526035928427}],"semaphors":[]},"title":"","description":"","x":312,"y":256,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5759760e3271d23760a38","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"Partner":"{{conv[415789].ref[{{UserId}}_{{VerificationCode}}_ClientAuth].Partner}}"},"extra_type":{"Partner":"object"},"err_node_id":"5af574a2f6c37674c98a9c3e","id":"a5330709-b26f-4b9f-9318-5c3b132cbbbe","chTime":1526037537560},{"id":"c9d90de1-cf14-4881-94cd-f5491acfe03a","type":"go","to_node_id":"5af5750260e3271d23758f38","chTime":1526037548998}],"semaphors":[]},"title":"Проверяем код подтверждения","description":"","x":396,"y":8,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5582960e3271d235c73a9","obj_type":0,"condition":{"logics":[{"to_node_id":"5af5595d82ba9606c42c44cd","type":"go_if_const","id":"88d9884d-9a7f-4c30-8e06-657f15009e18","conditions":[{"param":"{{PhoneNumber}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1526028428243},{"id":"aec28447-412a-4706-90f0-cb2c98ffee53","type":"go_if_const","conditions":[{"param":"{{VerificationCode}}","const":"","fun":"not_eq","cast":"string"}],"to_node_id":"5af5759760e3271d23760a38","chTime":1526035887815},{"id":"0e94afb4-5655-4a01-92ec-ee0f544a74fe","type":"go","to_node_id":"5af574a2f6c37674c98a9c3e","chTime":1526028329912}],"semaphors":[]},"title":"","description":"","x":684,"y":12,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5750260e3271d23758f3b","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":248,"y":284,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5750260e3271d23758f38","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"TaskId":"{{root.task_id}}"},"extra_type":{"TaskId":"string"},"err_node_id":"5af575d082ba9606c444fbec","id":"f3f32e22-c6e5-48f9-a600-4a43ab9d89af"},{"id":"3047cde2-d5ad-4eb6-8f62-5da65ae73b79","type":"go","to_node_id":"5af5772182ba9606c44617e3","chTime":1526036284562}],"semaphors":[]},"title":"Устанавливаем ссылку на текущий процесс","description":"","x":396,"y":176,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af574f7513aa0242d9a846a","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":740,"y":760,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af574f7513aa0242d9a8468","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af574f7513aa0242d9a8466","id":"227bd3b1-6c3f-41be-a317-7660fd68c36b"}]},"title":"","description":"","x":624,"y":572,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af574f7513aa0242d9a8466","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af574f7513aa0242d9a8467","extra":{"correlation_id":"TaskId","payload":"{{payload}}","reply_to":"/api/1/json/callback/5af5766482ba9606c4457b74/66cf909ef7b18f5c88652831a1a0baf0a19b8251","routing_key":"1c.foxylink","type":"dt11.SocialNetwork_Users.merge.sync"},"extra_type":{"correlation_id":"string","payload":"string","reply_to":"string","routing_key":"string","type":"string"},"group":"","id":"0ee1ad88-f269-466c-b12f-d355d456f059","user_id":56916,"conv_id":367561,"convTitle":"RabbitMQ - Send message"},{"id":"e89e7c15-f9e8-471b-b65b-2f12bf4fd304","type":"go","to_node_id":"5af5766482ba9606c4457b74","chTime":1526036086532}],"semaphors":[]},"title":"Отравляем партнера","description":"","x":396,"y":572,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af56381f6c37674c97b0efb","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"7d5dab04-e3e1-43c7-a169-ccacb72583d3"},{"id":"5cf787e3-a269-4379-90f8-5a1ca9d6a996","type":"go","to_node_id":"5af563a0513aa0242d8ab41b","chTime":1526031267084}],"semaphors":[]},"title":"","description":"","x":1228,"y":128,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af563a0513aa0242d8ab41b","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1344,"y":156,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5595d82ba9606c42c44cd","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"Partner":"{{conv[415789].ref[{{UserId}}_{{PhoneNumber}}_ClientAuth].Partner}}"},"extra_type":{"Partner":"string"},"err_node_id":"5af56381f6c37674c97b0efb","id":"4ef9df4b-44eb-4baa-b62e-edcb308ef975","chTime":1526031265639},{"id":"d50b6d20-467d-49e7-a618-6efea3641326","type":"go","to_node_id":"5af55aa5513aa0242d827f0a","chTime":1526028956223}],"semaphors":[]},"title":"Были ли уже получены коды подтверждения?","description":"","x":976,"y":48,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5588360e3271d235cbdc2","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af5588360e3271d235cbdbd","id":"2f831cd7-262c-4f51-922e-7277345a553c"}]},"title":"","description":"","x":908,"y":368,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5637282ba9606c435086a","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":936,"y":668,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af5588360e3271d235cbdc0","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af5588360e3271d235cbdc2","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"8aed45a8-ca21-488f-9b9c-69bbab712377"},{"type":"go_if_const","to_node_id":"5af5588360e3271d235cbdc2","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"aafd8484-e516-4034-9315-78f2609cc81d"},{"type":"go_if_const","to_node_id":"5af5635860e3271d23661fa6","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"69b66c4f-5d31-4256-aeed-95f1f76d1bd4","chTime":1526031202192},{"type":"go_if_const","to_node_id":"5af5635860e3271d23661fa6","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"71ab951a-276e-4144-b047-6242872e3419","chTime":1526031205769},{"id":"e73c9f25-f971-4ea9-8764-974d6ce05b60","type":"go","to_node_id":"5af5635860e3271d23661fa6","chTime":1526031194948}],"semaphors":[]},"title":"","description":"","x":908,"y":448,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5635860e3271d23661fa6","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"077194e2-512d-458e-809a-a4703baa7bf2"},{"id":"002e62f2-affd-4d54-8c94-bacf5071d730","type":"go","to_node_id":"5af5637282ba9606c435086a","chTime":1526031220742}],"semaphors":[]},"title":"","description":"","x":908,"y":544,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5633bf6c37674c97acc94","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1776,"y":1260,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af55e1582ba9606c43055dd","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af55e1582ba9606c43055df","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"80e5fdcb-7eba-40a6-95ea-a88711e6afa7"},{"type":"go_if_const","to_node_id":"5af55e1582ba9606c43055df","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"9ca91834-f7ce-4740-9f4c-bb72e2989c2f"},{"type":"go_if_const","to_node_id":"5af5630e513aa0242d8a2eb1","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"16604617-922c-4f4f-9660-8f7f0ec9384d","chTime":1526031151371},{"type":"go_if_const","to_node_id":"5af5630e513aa0242d8a2eb1","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"44ed3097-ff22-40b0-a579-4f7eb8c274ac"},{"type":"go","to_node_id":"5af5630e513aa0242d8a2eb1","id":"9251b09c-2ea5-425f-b9e9-e59337a79630"}],"semaphors":[]},"title":"","description":"","x":1584,"y":1232,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5630e513aa0242d8a2eb1","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"5282cfde-3e7b-446b-b870-d38d9849dfaf"},{"id":"785af998-cc11-4959-989f-0825a4149f80","type":"go","to_node_id":"5af5633bf6c37674c97acc94","chTime":1526031168547}],"semaphors":[]},"title":"","description":"","x":1668,"y":1232,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af56303f6c37674c97a9abc","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1784,"y":540,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af562e6f6c37674c97a8120","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":2128,"y":380,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af55e8582ba9606c430ba3f","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af55e8582ba9606c430ba41","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"c4bdd787-cc21-4e10-a513-848e1fa4382e"},{"type":"go_if_const","to_node_id":"5af55e8582ba9606c430ba41","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"d9b95eb4-0bfc-4e0c-b140-605bbd985600"},{"type":"go_if_const","to_node_id":"5af562b9f6c37674c97a5665","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"9d941dc1-19cf-43bb-9cff-9a23669b14c7"},{"type":"go_if_const","to_node_id":"5af562b9f6c37674c97a5665","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"2e28419a-7b4c-4dde-ab8d-945330fc9f20"},{"type":"go","to_node_id":"5af562b9f6c37674c97a5665","id":"52612aef-f91e-4db3-829c-4906092e1fd0"}],"semaphors":[]},"title":"","description":"","x":1908,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55d4a60e3271d2360d4c1","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af55d4a60e3271d2360d4c3","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"da0b19cc-ac98-4987-9f7f-9c2b678fde85"},{"type":"go_if_const","to_node_id":"5af55d4a60e3271d2360d4c3","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"1eb1d59e-466e-4c90-9c08-15f0c03f210c"},{"type":"go_if_const","to_node_id":"5af55d4a60e3271d2360d4c3","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"38483002-5a7f-4946-97e1-88d0bf73c179"},{"type":"go_if_const","to_node_id":"5af562a5513aa0242d89d307","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"cd12639f-b3f4-44ec-8d90-51949480844d"},{"type":"go","to_node_id":"5af562a5513aa0242d89d307","id":"2833b30c-9cb4-4333-9119-d40503e70042"}],"semaphors":[]},"title":"","description":"","x":1592,"y":856,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af562b9f6c37674c97a5665","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"afc0d793-2d97-489b-918d-cfecfb243b74"},{"id":"73c43b02-80a4-45b2-bf16-d6edc8ef9980","type":"go","to_node_id":"5af562e6f6c37674c97a8120","chTime":1526031078877}],"semaphors":[]},"title":"","description":"","x":2004,"y":352,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af562a5513aa0242d89d307","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"9347c77d-fdd3-424d-a9e1-431cd1428fe1"},{"id":"595632b1-010d-412e-beba-0db29c247ef9","type":"go","to_node_id":"5af55d4a60e3271d2360d4c5","chTime":1526031015937}],"semaphors":[]},"title":"","description":"","x":1696,"y":860,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55bb7f6c37674c973f165","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af55bb7f6c37674c973f166","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"274bb11b-6ddf-43ca-b673-5a53cd89695b"},{"type":"go_if_const","to_node_id":"5af55bb7f6c37674c973f166","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"e915e8d5-65dd-41dd-a9f6-9678e4246240"},{"type":"go_if_const","to_node_id":"5af55bb7f6c37674c973f166","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"b6d0a78c-4207-4b5b-b19c-d6ed0f97a67c"},{"type":"go_if_const","to_node_id":"5af56292f6c37674c97a343f","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"42becb5d-64e8-4cdf-85f5-1b7f06de1531"},{"type":"go","to_node_id":"5af56292f6c37674c97a343f","id":"8e22a58f-2786-4d76-bca1-7bc707c71492"}],"semaphors":[]},"title":"","description":"","x":1604,"y":692,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af56292f6c37674c97a343f","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"c65ae7b6-e313-4bad-82f7-6b9fcc2789ce"},{"id":"2ee234e9-d747-465c-aa54-c7da1215f5e0","type":"go","to_node_id":"5af55bb7f6c37674c973f168","chTime":1526030997657}],"semaphors":[]},"title":"","description":"","x":1696,"y":696,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af5626ff6c37674c97a119d","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"c9ae06f5-6cd3-438f-aca2-e514dd28aede"},{"id":"905ebc39-ac80-405d-8273-1d0ab6366773","type":"go","to_node_id":"5af56303f6c37674c97a9abc","chTime":1526031109307}],"semaphors":[]},"title":"","description":"","x":1756,"y":432,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55d4a60e3271d2360d4be","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"create","data":{"Partner":"{{Partner}}"},"data_type":{"Partner":"string"},"group":"","err_node_id":"5af55d4a60e3271d2360d4c1","id":"9dcdb628-b2d6-4679-9afa-ac40b051cadf","conv_id":415789,"ref":"{{UserId}}_{{Partner.VerificationCode}}_ClientAuth","user_id":56916,"convTitle":"Verification codes (Коды подтверждения)"},{"id":"d7d37ce3-3bbd-45d2-ac46-1731baa117b1","type":"go","to_node_id":"5af6a63160e3271d23f3ea35","chTime":1526113886339}],"semaphors":[]},"title":"Запомним код авторизации по пользователю","description":"","x":1352,"y":776,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55e8582ba9606c430ba41","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af55e8582ba9606c430ba3d","id":"ada52912-1543-44b3-adec-dab0d73c6eb2"}]},"title":"","description":"","x":1920,"y":260,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af556d160e3271d235b42bd","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":784,"y":340,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af556d160e3271d235b42ba","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5af5582960e3271d235c73a9","id":"6c85cdcf-6f61-4aa9-9b73-08b94259c480"}],"semaphors":[]},"title":"Start","description":"","x":784,"y":-72,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55aa5513aa0242d827f0a","obj_type":0,"condition":{"logics":[{"to_node_id":"5af55e1582ba9606c43055db","type":"go_if_const","id":"23ec3ab4-b205-450d-8df2-693705f1738a","conditions":[{"param":"{{Partner}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1526030127531},{"id":"4b34f43f-44f1-4d27-bf65-036cd5f1dc4b","type":"go","to_node_id":"5af5588360e3271d235cbdbd","chTime":1526028987899}],"semaphors":[]},"title":"","description":"","x":992,"y":224,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55e8582ba9606c430ba3d","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af55e8582ba9606c430ba3f","extra":{"ChannelName":"{{ChannelName}}","ChatId":"{{ChatId}}","Text":"Номер не найден, или попробуйте еще раз"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"dd0849c7-1fd1-4327-988c-7e2f55855b1e","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"ea6007a9-8c54-4c9f-a786-4deb5016a939","type":"go","to_node_id":"5af5626ff6c37674c97a119d","chTime":1526031095781}],"semaphors":[]},"title":"Сообщение, что клиента не удалось найти","description":"","x":1684,"y":260,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55e1582ba9606c43055db","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af55e1582ba9606c43055dd","extra":{"ChannelName":"{{ChannelName}}","ChatId":"{{ChatId}}","Text":"На указанный номер отправлен код подтверждения"},"extra_type":{"ChannelName":"string","ChatId":"string","Text":"string"},"group":"","id":"0090535d-cd77-41c6-aa1d-118c1daa144e","conv_id":385597,"convTitle":"Send message","user_id":56916},{"id":"6dacc850-292f-44c2-9270-1b60c2ef755d","type":"go","to_node_id":"5af55e46f6c37674c97642ea","chTime":1526029918867}],"semaphors":[]},"title":"Сообщение об отправке кода","description":"","x":1356,"y":1160,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55e64513aa0242d85e722","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1456,"y":1488,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5af55e46f6c37674c97642ea","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"d932bf89-c8e2-46b7-8427-8398efc14d01"},{"id":"2045417f-c069-4bbf-b8e1-da9d032e11f7","type":"go","to_node_id":"5af55e64513aa0242d85e722","chTime":1526029924190}],"semaphors":[]},"title":"","description":"","x":1428,"y":1356,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55e1582ba9606c43055df","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af55e1582ba9606c43055db","id":"5387d766-af1d-4c92-9272-9847c66d756e"}]},"title":"","description":"","x":1584,"y":1160,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55d4a60e3271d2360d4c5","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1824,"y":888,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af55d4a60e3271d2360d4c3","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af55d4a60e3271d2360d4be","id":"fae4829c-93fe-4c66-ac8a-1194c74f6fc6"}]},"title":"","description":"","x":1592,"y":764,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55bb7f6c37674c973f166","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af55bb7f6c37674c973f162","id":"2d0f2756-bf70-4830-ba18-490e78566b2d"}]},"title":"","description":"","x":1604,"y":600,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af55bb7f6c37674c973f162","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"create","data":{"Partner":"{{Partner}}"},"data_type":{"Partner":"string"},"group":"","ref":"{{UserId}}_{{PhoneNumber}}_ClientAuth","err_node_id":"5af55bb7f6c37674c973f165","id":"1492811b-f2fe-4e35-8bc2-6658fc375277","conv_id":415789,"user_id":56916},{"id":"525b97e7-9bb9-41bb-9de0-8195f0a098ec","type":"go","to_node_id":"5af55d4a60e3271d2360d4be","chTime":1526029646367}],"semaphors":[]},"title":"Запомним код авторизации по номеру телефона","description":"","x":1352,"y":600,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af55bb7f6c37674c973f168","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1824,"y":724,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af558b7f6c37674c9714346","obj_type":0,"condition":{"logics":[{"to_node_id":"5af55bb7f6c37674c973f162","type":"go_if_const","id":"c4d455e7-13c1-4d00-9052-0d0783e11aa5","conditions":[{"param":"{{Partner.Guid}}","const":"","fun":"not_eq","cast":"string"},{"param":"{{Partner.VerificationCode}}","const":"","fun":"not_eq","cast":"string"}],"chTime":1526029311840},{"id":"467359c6-3c99-428a-bc04-a667b03a1350","type":"go","to_node_id":"5af55e8582ba9606c430ba3d","chTime":1526030020998}],"semaphors":[]},"title":"","description":"","x":1388,"y":260,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af5588360e3271d235cbdbd","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af5588360e3271d235cbdc0","extra":{"PhoneNumber":"{{PhoneNumber}}","routing_key":"1c.foxylink","type":"dt11.SocialNetwork_Users.update.sync"},"extra_type":{"PhoneNumber":"string","routing_key":"string","type":"string"},"group":"","id":"d4fa1c32-ba9a-425a-811b-0fd43e01aa0c","conv_id":415680,"convTitle":"Client find (Найти клиента по номеру телефона)","user_id":56916},{"id":"de94695a-9bc0-4d9e-99ae-13e949949922","type":"go","to_node_id":"5af558b7f6c37674c9714346","chTime":1526028499233}],"semaphors":[]},"title":"Ищем клиента по номеру телефона","description":"","x":992,"y":368,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":385597,"parent_id":199282,"title":"Send message","description":"","status":"active","params":[{"name":"ChannelName","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"Text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"CSMessageID","type":"string","descr":"","flags":["input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af05f8af6c37674c9265404","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"ec334ac0-cc93-4473-b993-b7cd350e8fd0"},{"id":"d579780e-1dd6-4fb0-9f9a-5c04955e765c","type":"go","to_node_id":"5af05f9382ba9606c4f2f06b","chTime":1525702550475}],"semaphors":[]},"title":"","description":"","x":664,"y":704,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14b6e513aa0242d867d7e","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"37c4d759-6a33-406c-986f-f972c2b51ed0"},{"id":"8e132046-37e6-4758-a68a-ab43bffaf11f","type":"go","to_node_id":"5ad89c82513aa041a106a440","chTime":1525762926225}],"semaphors":[]},"title":"","description":"","x":1336,"y":32,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14b9082ba9606c44647e7","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"815b4f5e-60dd-4139-a9da-a21c8b5c0822"},{"id":"1da0a43f-5529-4c4b-a53d-ccbdee6e37f5","type":"go","to_node_id":"5ad89ced513aa041a1070012","chTime":1525762969630}],"semaphors":[]},"title":"","description":"","x":1332,"y":200,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14b4af6c37674c97bfcb7","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"3ea03748-775a-4786-a776-e031cdfab3ac"},{"id":"f49dc946-8528-4167-b89c-5ea10c6c6663","type":"go","to_node_id":"5ad89cbc82ba96043e9ab865","chTime":1525762890665}],"semaphors":[]},"title":"","description":"","x":688,"y":192,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14bb6513aa0242d86bfcf","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"6852fa83-07e9-4e31-8502-fcc04800b92a"},{"id":"cd248928-a3a6-4c30-9767-dacf5e3bd02a","type":"go","to_node_id":"5ad9e92782ba96043e48b934","chTime":1525762998373}],"semaphors":[]},"title":"","description":"","x":1332,"y":376,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89ced513aa041a1070012","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error send skype","description":"","x":1444,"y":228,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af060cf513aa0242d310889","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af060cf513aa0242d31088b","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"d1a4d278-fe8f-4569-9bc9-bed92448e252"},{"type":"go_if_const","to_node_id":"5af060cf513aa0242d31088b","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"12f60303-2655-4e72-8d8b-4d1ad34e698c"},{"type":"go_if_const","to_node_id":"5af14be560e3271d2376156b","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"56fd412e-8046-4170-8ff4-d1a0254b7f58"},{"type":"go_if_const","to_node_id":"5af14be560e3271d2376156b","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"335eed67-4b26-4f4e-b4d1-1eaabd2ed64a"},{"type":"go","to_node_id":"5af14be560e3271d2376156b","id":"a2cd526e-ebac-4591-8cc4-31f2ab19450e"}],"semaphors":[]},"title":"","description":"","x":1232,"y":800,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89ced513aa041a1070005","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad89ced513aa041a107000a","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"512d86ab-9e60-4de9-a2e5-aa6ea4d78aab"},{"type":"go_if_const","to_node_id":"5ad89ced513aa041a107000a","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"cc93f6cd-c2b7-4e5a-891b-1936c9a5493e"},{"type":"go_if_const","to_node_id":"5af14b9082ba9606c44647e7","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"7df1f813-5a9f-4454-b208-aba961709087"},{"type":"go_if_const","to_node_id":"5af14b9082ba9606c44647e7","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"f392b7e8-492e-489f-9066-67a0ad86db12"},{"type":"go","to_node_id":"5af14b9082ba9606c44647e7","id":"dcef2ba9-7930-460b-8d6b-06af1988c3cb"}],"semaphors":[]},"title":"","description":"","x":1224,"y":200,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89cbc82ba96043e9ab865","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error chanel name","description":"","x":716,"y":328,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af14be560e3271d2376156b","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"938831f6-5b39-4631-b6b9-831b1444de21"},{"id":"a0ca0ebf-5dc2-407f-9cc3-d5d19e6418c9","type":"go","to_node_id":"5af060cf513aa0242d31088d","chTime":1525763045579}],"semaphors":[]},"title":"","description":"","x":1320,"y":800,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14bcef6c37674c97c776e","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"6717e86e-a1ba-48f1-9ab6-da7c45c5f1a3"},{"id":"abcb6a95-6f78-4242-8a60-f97ed49a2108","type":"go","to_node_id":"5af060b0513aa0242d30ed88","chTime":1525763022099}],"semaphors":[]},"title":"","description":"","x":1324,"y":604,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad9e92782ba96043e48b927","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad9e92782ba96043e48b92f","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"5e389fb7-3f1f-4aab-a2cf-a2dce364eeac"},{"type":"go_if_const","to_node_id":"5ad9e92782ba96043e48b92f","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"8f4f0213-4546-4a5a-b25e-1af4c8d389f2"},{"type":"go_if_const","to_node_id":"5af14bb6513aa0242d86bfcf","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"b26cf1f9-516f-49e5-b58a-3e76c90c1deb"},{"type":"go_if_const","to_node_id":"5af14bb6513aa0242d86bfcf","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"90610534-d992-4484-afd8-4275a00e4145"},{"type":"go","to_node_id":"5af14bb6513aa0242d86bfcf","id":"901c058e-5364-44e7-bd81-3a391f7db788"}],"semaphors":[]},"title":"","description":"","x":1224,"y":376,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af060cf513aa0242d31088b","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af060cf513aa0242d310886","id":"740a887b-160f-4031-991e-6b32e85ecb23"}]},"title":"","description":"","x":1236,"y":704,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af060b0513aa0242d30ed83","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af060b0513aa0242d30ed85","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"4e59d6c5-f04e-4133-9f9d-cef443afbc37"},{"type":"go_if_const","to_node_id":"5af060b0513aa0242d30ed85","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"5fa2cc8d-a403-4865-80a9-bf0dc0d5ffae"},{"type":"go_if_const","to_node_id":"5af14bcef6c37674c97c776e","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"1b6ed050-f0a4-4eb8-b3dc-fd22d98b244c"},{"type":"go_if_const","to_node_id":"5af14bcef6c37674c97c776e","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"245dd569-eb1f-4229-bd1f-398f77b4769b"},{"type":"go","to_node_id":"5af14bcef6c37674c97c776e","id":"d44e8448-894e-43e2-9458-ca1a66609fee"}],"semaphors":[]},"title":"","description":"","x":1240,"y":604,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af060b0513aa0242d30ed80","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af060b0513aa0242d30ed83","extra":{"ChatId":"{{ChatId}}","UserId":"{{UserId}}","ChannelName":"{{ChannelName}}","Text":"{{Text}}","Type":"{{Type}}","MessageId":"{{MessageId}}","Date":"{{Date}}","Name":"{{Description}}","CSMessageID":"{{CSMessageID}}"},"extra_type":{"ChatId":"string","UserId":"string","ChannelName":"string","Text":"string","Type":"string","MessageId":"string","Date":"number","Name":"string","CSMessageID":"string"},"group":"","id":"a6754da4-85ad-48e5-b2d7-3cf72e1e27f1","conv_id":367757,"user_id":56916,"convTitle":"Canonical message"},{"id":"c5531698-02aa-49fa-b87d-c2839638059c","type":"go","to_node_id":"5af060cf513aa0242d310886","chTime":1525702913582}],"semaphors":[]},"title":"Create canonical message","description":"","x":984,"y":512,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad9e92682ba96043e48b7fe","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad9e92782ba96043e48b927","extra":{"ChatId":"{{ChatId}}","Text":"{{Text}}"},"extra_type":{"ChatId":"string","Text":"string"},"group":"","id":"0f1aaf68-4259-44e8-819b-3bf3b2937292","user_id":56916,"conv_id":409524,"convTitle":"Facebook - Send message"},{"id":"86f33a73-2086-4ecb-bea6-3fc3e0bc1812","type":"go","to_node_id":"5af05ef9f6c37674c925d809","chTime":1525702522780}],"semaphors":[]},"title":"Send to Facebook","description":"","x":924,"y":284,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af060cf513aa0242d310886","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af060cf513aa0242d310889","extra":{"payload":"{{canonical}}","routing_key":"1c.foxylink","type":"dt11.SocialNetwork_NewMessage.create.async","content_type":"application/json","content_encoding":"utf-8","headers":"{\"EventSource\":\"{{ChannelName}}.Bot\"}"},"extra_type":{"payload":"string","routing_key":"string","type":"string","content_type":"string","content_encoding":"string","headers":"object"},"group":"","id":"4e741566-3eca-410f-83b0-b9e4e6c4ee46","conv_id":367561,"convTitle":"RabbitMQ - Send message","user_id":56916},{"id":"6be98b3a-9bb7-4fd2-ae7f-888317783144","type":"go","to_node_id":"5af05f8af6c37674c9265404","chTime":1525702931570}],"semaphors":[]},"title":"Send to 1c.foxylink","description":"","x":984,"y":700,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad89c5e60e3271190b8c3bc","obj_type":0,"condition":{"logics":[{"to_node_id":"5ad89c82513aa041a106a43a","type":"go_if_const","id":"ca284602-8b60-4eed-a876-483da11af867","conditions":[{"param":"ChannelName","const":"Telegram","fun":"eq","cast":"string"}],"chTime":1524145284823},{"id":"5ce7c5f7-60a1-4254-9b07-6cd0d1bee041","type":"go_if_const","conditions":[{"param":"ChannelName","const":"Skype","fun":"eq","cast":"string"}],"to_node_id":"5ad89ced513aa041a106ffe5","chTime":1524145416948},{"id":"7aa8d30a-ab31-44bc-8210-28d6e500dbc1","type":"go_if_const","conditions":[{"param":"ChannelName","const":"Facebook","fun":"eq","cast":"string"}],"to_node_id":"5ad9e92682ba96043e48b7fe","chTime":1524230438397},{"id":"cc0383c7-e569-49af-9bc6-889bed30d230","type":"go","to_node_id":"5af14b4af6c37674c97bfcb7","chTime":1524145348996}],"semaphors":[]},"title":"","description":"","x":616,"y":-64,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad89c22513aa041a106539b","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5ad89c5e60e3271190b8c3bc","id":"e9fbd3e9-e857-429f-939d-fb2d3c1f7db8"}],"semaphors":[]},"title":"Start","description":"","x":716,"y":-140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89c82513aa041a106a43e","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad89c82513aa041a106a43a","id":"11f744bc-ed6e-4844-9947-ec9a53845a39"}]},"title":"","description":"","x":1220,"y":-72,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af060cf513aa0242d31088d","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error send to foxylink","description":"","x":1436,"y":828,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af060b0513aa0242d30ed85","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af060b0513aa0242d30ed80","id":"4d9acb0c-841d-4048-93f0-b1757b8a4261"}]},"title":"","description":"","x":1240,"y":512,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af060b0513aa0242d30ed88","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error create canonical message","description":"","x":1456,"y":632,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad9e92782ba96043e48b934","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error send Facebook","description":"","x":1452,"y":404,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ad9e92782ba96043e48b92f","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad9e92682ba96043e48b7fe","id":"8e9f901a-5635-4590-bea2-55601a0fd464"}]},"title":"","description":"","x":1224,"y":288,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89ced513aa041a107000a","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ad89ced513aa041a106ffe5","id":"8cf071bb-15b3-4335-bf78-8c4fc0e6a1c5"}]},"title":"","description":"","x":1224,"y":112,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af05f9382ba9606c4f2f06b","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"End process","description":"","x":692,"y":820,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5ad89ced513aa041a106ffe5","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad89ced513aa041a1070005","extra":{"ChatId":"{{ChatId}}","Text":"{{Text}}"},"extra_type":{"ChatId":"string","Text":"string"},"group":"","id":"8ec3e0e5-e450-4ee4-8392-7bc7f9b3ef50","conv_id":367771,"user_id":56916,"convTitle":"Skype - Send message"},{"id":"be2d7ff8-07d7-443f-b80e-59b552902a53","type":"go","to_node_id":"5af05ef9f6c37674c925d809","chTime":1524145432389}],"semaphors":[]},"title":"Send to skype","description":"","x":916,"y":104,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad89c82513aa041a106a43a","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ad89c82513aa041a106a43c","extra":{"Text":"{{Text}}","ChatId":"{{ChatId}}"},"extra_type":{"Text":"string","ChatId":"string"},"group":"","id":"623d13a3-42ad-4a33-a48b-2af223694390","conv_id":373380,"convTitle":"Telegram - Send message","user_id":56916},{"id":"a8cd8e58-bc9d-4442-9d2d-841792ba9a30","type":"go","to_node_id":"5af05ef9f6c37674c925d809","chTime":1524145313960}],"semaphors":[]},"title":"Send to telegram","description":"","x":916,"y":-68,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af05ef9f6c37674c925d809","obj_type":0,"condition":{"logics":[{"to_node_id":"5af060b0513aa0242d30ed80","type":"go_if_const","id":"b322aec0-2247-467b-ab72-8eb005aac4ca","conditions":[{"param":"CSMessageID","const":"","fun":"not_eq","cast":"string"}],"chTime":1525709242451},{"id":"2d0cc28e-7850-4dde-8802-19368b4c7c61","type":"go","to_node_id":"5af05f8af6c37674c9265404","chTime":1525702542823}],"semaphors":[]},"title":"It's reply from 1C:Enterprise","description":"","x":592,"y":452,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ad89c82513aa041a106a43c","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ad89c82513aa041a106a43e","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"d730909e-f12a-46ec-8aed-56443ef6ac24"},{"type":"go_if_const","to_node_id":"5ad89c82513aa041a106a43e","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"9ec4de88-28ba-4432-9ed6-fe1a9ee8f050"},{"type":"go_if_const","to_node_id":"5af14b6e513aa0242d867d7e","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"8ac50418-6414-4c6c-95e7-a16622be8658"},{"type":"go_if_const","to_node_id":"5af14b6e513aa0242d867d7e","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"1edb46bf-0a3e-4846-83ee-81b3dba074c8"},{"type":"go","to_node_id":"5af14b6e513aa0242d867d7e","id":"90ceadd3-c774-42e5-9c76-41dbfceb676f"}],"semaphors":[]},"title":"","description":"","x":1220,"y":32,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ad89c82513aa041a106a440","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Error send telegram","description":"","x":1448,"y":60,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":367757,"parent_id":199282,"title":"Canonical message","description":"","status":"active","params":[{"name":"ChannelName","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"Text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"Type","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"UserId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"MessageId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaad11a513aa028ccd5915d","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1456,"y":264,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaad24682ba963c286a6457","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"canonical":"{{canonical}}"},"res_data_type":{"canonical":"object"},"mode":"key_value","throw_exception":false,"id":"9fea7c25-5897-4c60-9fb1-e22d2b229890"},{"id":"454f6d5d-a848-4d4c-a449-c4fc5db75a51","type":"go","to_node_id":"5aaad105513aa028ccd586e4","chTime":1521144386752}],"semaphors":[]},"title":"","description":"","x":792,"y":340,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaad105513aa028ccd586e4","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":892,"y":508,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aaad11a513aa028ccd5915b","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaad11a513aa028ccd59158","id":"30b9c2cc-e57a-4b96-bab9-8ffe570dc478"}]},"title":"","description":"","x":1036,"y":144,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aed70c982ba9606c4abf619","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aed70c982ba9606c4abf611","id":"79395870-94a3-47d1-9edb-086d23d296fd"}]},"title":"","description":"","x":1076,"y":-68,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aed70c982ba9606c4abf615","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aed70c982ba9606c4abf619","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"c6092a5a-0989-4c1c-9830-11e2c2442e10"},{"type":"go_if_const","to_node_id":"5af14d5b82ba9606c447e37b","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"806a6ace-a43c-4409-a56d-777889736871"},{"type":"go","to_node_id":"5af14d5b82ba9606c447e37b","id":"bb7f778d-ca26-43f8-a57a-c6135bda5418"}],"semaphors":[]},"title":"","description":"","x":1076,"y":0,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af14d5b82ba9606c447e37b","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"97356fdd-833e-4576-9112-affb237f0d50"},{"id":"1086313a-228e-4729-98d8-9116bfff8afc","type":"go","to_node_id":"5aed70c982ba9606c4abf61d","chTime":1525763419052}],"semaphors":[]},"title":"","description":"","x":1168,"y":0,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaad11a513aa028ccd59158","obj_type":0,"condition":{"logics":[{"src":"var canonical = {};\ncanonical.ChannelName = data.ChannelName;\ncanonical.ChatId = data.ChatId;\ncanonical.MessageId = data.MessageId;\ncanonical.Text = data.Text;\ncanonical.Type = data.Type;\ncanonical.UserId = data.UserId;\ncanonical.Date = data.Date;\ncanonical.Description = data.Name;\nif (data.CSMessageID){\n\tcanonical.CSMessageID = data.CSMessageID;        \n}\ndata.canonical = canonical;","lang":"js","type":"api_code","err_node_id":"5aaad11a513aa028ccd59159","id":"1d6af10e-b66c-4d71-939f-bd409a670013","lang":"js","src":"var canonical = {};\ncanonical.ChannelName = data.ChannelName;\ncanonical.ChatId = data.ChatId;\ncanonical.MessageId = data.MessageId;\ncanonical.Text = data.Text;\ncanonical.Type = data.Type;\ncanonical.UserId = data.UserId;\ncanonical.Date = data.Date;\ncanonical.Description = data.Name;\nif (data.CSMessageID){\n\tcanonical.CSMessageID = data.CSMessageID;        \n}\ndata.canonical = canonical;"},{"id":"203f9c90-1fb2-4927-a485-2be4fc077095","type":"go","to_node_id":"5aaad24682ba963c286a6457","chTime":1521144077380}],"semaphors":[]},"title":"Create canonical message","description":"","x":792,"y":160,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af14da0513aa0242d8888db","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"ccacfb58-b129-4504-9956-fd725aa43f0f"},{"id":"b53d1ee4-a3b4-405c-83bc-dfdc0f30261f","type":"go","to_node_id":"5aaad11a513aa028ccd5915d","chTime":1525763488353}],"semaphors":[]},"title":"","description":"","x":1156,"y":240,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaad11a513aa028ccd59159","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaad11a513aa028ccd5915b","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"b61ce6c5-da7b-4205-9853-3e715c6677c1"},{"type":"go_if_const","to_node_id":"5af14da0513aa0242d8888db","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"6982a62e-0618-4fa3-8950-23f222f70cf9"},{"type":"go","to_node_id":"5af14da0513aa0242d8888db","id":"e40b1c44-db48-43ce-82e6-42b9dca78922"}],"semaphors":[]},"title":"","description":"","x":1032,"y":240,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aed70c982ba9606c4abf61d","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":1432,"y":28,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaad105513aa028ccd586e2","obj_type":1,"condition":{"logics":[{"id":"02cabb93-a5e6-4e8c-8d0d-79820a8eac4d","type":"go","to_node_id":"5aed70c982ba9606c4abf611","chTime":1525707246567}],"semaphors":[]},"title":"Start","description":"","x":888,"y":-216,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aed70c982ba9606c4abf611","obj_type":0,"condition":{"logics":[{"src":"if (data.ChannelName == \"Skype\" && data.CSMessageID)\n{\n    data.Date = new Date(data.Date * 1000).toISOString();\n}\nelse if (data.ChannelName == \"Skype\")\n{\n    data.Date = data.Date;\n}\nelse if (data.ChannelName == \"Telegram\")\n{\n\tdata.Date = new Date(data.Date * 1000).toISOString();\n}\nelse if (data.ChannelName == \"Facebook\")\n{\n    data.Date = new Date(data.Date).toISOString();\n}","lang":"js","type":"api_code","err_node_id":"5aed70c982ba9606c4abf615","id":"7f331443-ab33-4cf4-b23b-97a47607948a","lang":"js","src":"if (data.ChannelName == \"Skype\" && data.CSMessageID)\n{\n    data.Date = new Date(data.Date * 1000).toISOString();\n}\nelse if (data.ChannelName == \"Skype\")\n{\n    data.Date = data.Date;\n}\nelse if (data.ChannelName == \"Telegram\")\n{\n\tdata.Date = new Date(data.Date * 1000).toISOString();\n}\nelse if (data.ChannelName == \"Facebook\")\n{\n    data.Date = new Date(data.Date).toISOString();\n}"},{"id":"268542a3-27ef-48f9-be92-7325523c2048","type":"go","to_node_id":"5aaad11a513aa028ccd59158","chTime":1525510345784}],"semaphors":[]},"title":"Date standardization","description":"","x":788,"y":-64,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":367771,"parent_id":199283,"title":"Skype - Send message","description":"","status":"active","params":[{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"Text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaaf06f82ba963c287419e9","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true","Type":"message","Date":"$.unixtime()","MessageId":"$.unixtime()"},"res_data_type":{"success":"boolean","Type":"string","Date":"number","MessageId":"string"},"mode":"key_value","throw_exception":false,"id":"31d0ce1b-4c81-4936-bb0c-d8d918d1d862"},{"id":"e1bcca59-952d-4a5c-b732-46a8ef784163","type":"go","to_node_id":"5aaae96082ba963c28728f1f","chTime":1521152110246}],"semaphors":[]},"title":"","description":"","x":776,"y":364,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaae96c513aa028ccde9451","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaae96c513aa028ccde9453","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"f8dc218a-139c-4442-b35a-2c0e5e530c95"},{"type":"go_if_const","to_node_id":"5aab5ab7513aa028cceda14f","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"b66d8dd2-6e6a-4483-bfc8-d043d14d8122","chTime":1521179571918},{"type":"go_if_const","to_node_id":"5aaae96c513aa028ccde9453","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"c2d01ebf-8d62-4878-a471-5e8da2cb22f5"},{"id":"199a6846-7aa8-485a-8aac-c2fd8aa38494","type":"go","to_node_id":"5aab5ab7513aa028cceda14f","chTime":1521179575813}],"semaphors":[]},"title":"","description":"","x":1028,"y":284,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaaed23f6c3765f50e3d09e","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"token":"{{conv[367769].ref[skype_token].access_token}}"},"extra_type":{"token":"string"},"err_node_id":"5aab590d60e3274302a45c2f","id":"cdcf54bd-16b3-4cb0-b75d-925a80f6c655"},{"id":"df7389c0-92ea-4280-a43d-6b42c9bcb379","type":"go","to_node_id":"5aaae96c513aa028ccde944f","chTime":1521151261018}],"semaphors":[]},"title":"Get skype token","description":"","x":776,"y":8,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aab590d60e3274302a45c2f","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"d7b3a81e-70b1-4945-a5cd-be7882fb8f96","exception_reason":"Cannot set skype token"},{"id":"b8a1cc65-8b2c-46e1-a1a1-2cbcf964dab4","type":"go","to_node_id":"5aaaed23f6c3765f50e3d09f","chTime":1521178893026}],"semaphors":[]},"title":"","description":"","x":1048,"y":76,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aab5ab7513aa028cceda14f","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false","message":"{{message}}"},"res_data_type":{"success":"boolean","message":"string"},"mode":"key_value","throw_exception":true,"id":"bc6c0c53-5973-44fc-9581-e7077dbbec38"},{"id":"32263f6a-401f-4ace-bd7f-e4b0be6bf2ad","type":"go","to_node_id":"5aaae96c513aa028ccde9454","chTime":1521179581016}],"semaphors":[]},"title":"","description":"","x":1124,"y":268,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaae96c513aa028ccde9453","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaae96c513aa028ccde944f","id":"0db167cd-4c18-4667-91e5-d4011e2b7963"}]},"title":"","description":"","x":1028,"y":184,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaae96c513aa028ccde944f","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aaae96c513aa028ccde9451","format":"","method":"POST","url":"https://smba.trafficmanager.net/apis/v3/conversations/{{ChatId}}/activities","extra":{"text":"{{Text}}","type":"message"},"extra_type":{"text":"string","type":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{"Authorization":"Bearer {{token}}"},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"bd217cfb-03bd-4032-9e19-07a47aae19b0","is_migrate":true},{"id":"2d22ddb0-1d4a-47c7-b0e8-44f713c12fbf","type":"go","to_node_id":"5aaaf06f82ba963c287419e9","chTime":1521150310420}],"semaphors":[]},"title":"Send message","description":"","x":776,"y":184,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaaed23f6c3765f50e3d09f","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Skype Token: Other Errors","description":"","x":1300,"y":104,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaae96082ba963c28728f1f","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":876,"y":508,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5aaae96c513aa028ccde9454","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Send message: Other Errors","description":"","x":1376,"y":296,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaae96082ba963c28728f1d","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aaaed23f6c3765f50e3d09e","id":"eae789ec-2317-49f8-beb7-68568163db29"}],"semaphors":[]},"title":"Start","description":"","x":876,"y":-92,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":367762,"parent_id":199283,"title":"Skype - Set credentials","description":"","status":"active","params":[{"name":"skype_client_secret","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"skype_client_id","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaffede513aa028cc450646","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":864,"y":232,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaffede513aa028cc450645","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaffede513aa028cc450641","id":"439e216c-020a-436d-9560-af3968e060bc"}]},"title":"","description":"","x":512,"y":204,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaffede513aa028cc450644","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaffede513aa028cc450645","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"b02687b3-77bd-49ca-8758-ce32c3a5e280"},{"type":"go_if_const","to_node_id":"5aaffede513aa028cc450645","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"74fb8b03-d084-4993-bed7-cd75bc0e4fb7"},{"type":"go_if_const","to_node_id":"5aafff38f6c3767dbdd0fe75","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"2e7bf5eb-b14b-48be-a455-dcab7c97a2cc"},{"type":"go_if_const","to_node_id":"5aafff38f6c3767dbdd0fe75","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"4ce3b887-c2bc-46c3-90fa-50be73849000"},{"type":"go","to_node_id":"5aafff38f6c3767dbdd0fe75","id":"b435695b-4392-4bf0-918f-578ceb97215b"}],"semaphors":[]},"title":"","description":"","x":512,"y":288,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafff38f6c3767dbdd0fe75","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"36d7dbf1-7d86-4059-89b3-9b50f158206e","exception_reason":"Failed to update skype credentials"},{"id":"6e7b9069-0582-4cad-a946-347a2ad39d63","type":"go","to_node_id":"5aaffede513aa028cc450646","chTime":1521483555908}],"semaphors":[]},"title":"Failed to update skype credentials","description":"","x":592,"y":204,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaae104513aa028ccdc2666","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaae104513aa028ccdc2667","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"d6f9229e-1ce8-449c-b9d4-f5175702e146"},{"type":"go_if_const","to_node_id":"5aaae104513aa028ccdc2667","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"3792460f-8d8b-432d-9c9f-c50b3441f0e1"},{"type":"go_if_const","to_node_id":"5aafff6af6c3767dbdd12228","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"72cbc80b-b46c-4ae1-b01b-35b04db5e2fe"},{"type":"go_if_const","to_node_id":"5aafff6af6c3767dbdd12228","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"c3d77a57-7a81-4c29-8a4d-5302cd3a202c"},{"type":"go","to_node_id":"5aafff6af6c3767dbdd12228","id":"ec7c373f-c77d-4ce1-bffc-c1c7d5faa1b1"}],"semaphors":[]},"title":"","description":"","x":512,"y":452,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aafffb0513aa028cc45968e","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"9e14b0b7-e575-40dc-83e8-9ddf90c3e3b2"},{"id":"29ac7985-1c7a-4426-b109-30384fea44b9","type":"go","to_node_id":"5aaadb5960e327430291dadd","chTime":1521483685400}],"semaphors":[]},"title":"Successfully updated","description":"","x":276,"y":532,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aafff6af6c3767dbdd12228","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"26866b65-8ba7-496f-a058-f75ded8eb48f","exception_reason":"Failed to update skype token"},{"id":"c52ca0fd-4eb0-4a4c-ad57-a79aec3fe895","type":"go","to_node_id":"5aaae104513aa028ccdc2668","chTime":1521483633950}],"semaphors":[]},"title":"Failed to update skype token","description":"","x":592,"y":372,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaffede513aa028cc450641","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaffede513aa028cc450644","extra":{"corezoid_reference":"skype_credentials"},"extra_type":{"corezoid_reference":"string"},"group":"all","id":"e06d581a-2fc2-48d2-8f87-cd40c76a8c8d","conv_id":370761,"user_id":56916},{"id":"7d99d855-dafd-4e62-86d7-156ed3a34881","type":"go","to_node_id":"5aaae104513aa028ccdc2664","chTime":1521483602054}],"semaphors":[]},"title":"Update Skype credentials","description":"","x":276,"y":204,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaae104513aa028ccdc2667","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaae104513aa028ccdc2664","id":"a83efea0-7d27-4be4-8180-937942948c1e"}]},"title":"","description":"","x":512,"y":372,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaadb5960e327430291dada","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aaffede513aa028cc450641","id":"fef2a22f-7575-43bb-862c-d6908109c256"}],"semaphors":[]},"title":"Start","description":"","x":376,"y":116,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaae104513aa028ccdc2668","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Update Skype Token: Other Errors","description":"","x":864,"y":400,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaae104513aa028ccdc2664","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5aaae104513aa028ccdc2666","extra":{"copy":"no"},"extra_type":{"copy":"string"},"group":"","id":"4a192a0f-e6a8-4a86-bd86-749b70c43e2b","conv_id":367763,"user_id":56916,"convTitle":"Skype - Update token"},{"id":"17f9dacf-e4e8-4e28-8eaf-e92cba30347c","type":"go","to_node_id":"5aafffb0513aa028cc45968e","chTime":1521148156781}],"semaphors":[]},"title":"Update Skype Token","description":"","x":276,"y":372,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaadb5960e327430291dadd","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":376,"y":684,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":367763,"parent_id":199283,"title":"Skype - Update token","description":"","status":"active","params":null,"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5aaaddbff6c3765f50df6bb4","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5aaaddbff6c3765f50df6bb5","format":"","method":"POST","url":"https://login.microsoftonline.com/common/oauth2/v2.0/token","extra":{"grant_type":"client_credentials","client_id":"{{skype_client_id}}","client_secret":"{{skype_client_secret}}","scope":"https://api.botframework.com/.default"},"extra_type":{"grant_type":"string","client_id":"string","client_secret":"string","scope":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{},"send_sys":false,"cert_pem":"","content_type":"application/x-www-form-urlencoded","id":"2ae3fdd2-9181-4d8b-89d1-a6082a90d80c","is_migrate":true},{"id":"8f173a88-6f06-4984-a26b-f148606b95f0","type":"go","to_node_id":"5ab0006e513aa028cc460fee","chTime":1521147319931}],"semaphors":[]},"title":"","description":"","x":772,"y":316,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0006e513aa028cc460fef","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ab0006e513aa028cc460ff1","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"c04b91c9-48d6-435e-883c-1d01cd683921"},{"type":"go_if_const","to_node_id":"5ab0006e513aa028cc460ff1","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"b52cceb1-7770-4c88-a179-471637fafa3c"},{"type":"go_if_const","to_node_id":"5ab0014a82ba963c28c45dbc","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"24e98fe1-3a74-479c-959e-7f9d7957aa28"},{"type":"go_if_const","to_node_id":"5ab0014a82ba963c28c45dbc","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"030e4814-d7af-418e-b32e-b9b8daf45006"},{"type":"go","to_node_id":"5ab0014a82ba963c28c45dbc","id":"d0dba6c5-641c-4332-8ff5-20ce9a68e6c2"}],"semaphors":[]},"title":"","description":"","x":1024,"y":580,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaadd0c60e3274302927989","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Set Credentials: Other Errors","description":"","x":1316,"y":204,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ab0003260e3275612c4d578","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"aa5641e0-6f18-43f6-80ff-e68577477fbe","exception_reason":"Failed to set skype credentials"},{"id":"6df55f10-876c-4781-848e-c73ab622d1e4","type":"go","to_node_id":"5aaadd0c60e3274302927989","chTime":1521483809525}],"semaphors":[]},"title":"Failed to set skype credentials","description":"","x":1044,"y":176,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0008c82ba963c28c3e4c9","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1396,"y":684,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5ab0006e513aa028cc460ff3","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1388,"y":512,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaae02b513aa028ccdbde3f","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaae02b513aa028ccdbde41","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"ca695684-2b58-40e0-8c32-8e87feb7a551"},{"type":"go_if_const","to_node_id":"5aaae02b513aa028ccdbde41","conditions":[{"fun":"eq","const":"copy_task_timeout","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"a670c7d8-fd6e-456c-a9d4-19a22374dfa9"},{"type":"go_if_const","to_node_id":"5aaae02b513aa028ccdbde41","conditions":[{"fun":"eq","const":"copy_task_fatal_error","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"dbed9b1f-c3d0-432c-9d63-6f9ee48860df"},{"type":"go_if_const","to_node_id":"5ab0019a82ba963c28c491c8","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_return_type_tag__","cast":"string"}],"id":"8ccce459-8d8c-42b2-80cb-73a80441eacf"},{"type":"go","to_node_id":"5ab0019a82ba963c28c491c8","id":"71760a70-3d1a-4537-87c2-907245250a70"}],"semaphors":[]},"title":"","description":"","x":1044,"y":928,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab0008c82ba963c28c3e4c7","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5ab0008c82ba963c28c3e4c8","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"e0b8aec9-abd0-4094-8c24-c788963634dc"},{"type":"go_if_const","to_node_id":"5ab0008c82ba963c28c3e4c8","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"21a6a062-1c04-4d7d-9eaf-f94fe29e75dd"},{"type":"go_if_const","to_node_id":"5ab0017282ba963c28c478f9","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"8269d966-ec3f-4e35-b86b-831a163c209f"},{"type":"go_if_const","to_node_id":"5ab0017282ba963c28c478f9","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"f07ca026-ff0d-4dd1-bc2d-c6badb3880f2"},{"type":"go","to_node_id":"5ab0017282ba963c28c478f9","id":"1be2c4f7-d253-4a3b-a1bc-19b627e250a0"}],"semaphors":[]},"title":"","description":"","x":1040,"y":756,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab001a460e3275612c5bfc8","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"f0245ba4-8cc9-45ee-939e-8078286f3d43"},{"id":"0620c733-4ba7-40c2-a99b-7f948024b6ed","type":"go","to_node_id":"5aaadc86f6c3765f50def75b","chTime":1521484192137}],"semaphors":[]},"title":"Successfully updated","description":"","x":772,"y":1004,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0019a82ba963c28c491c8","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"ee209a01-e3e1-4667-88cd-28b048cbb241","exception_reason":"Self-replication failure"},{"id":"4fae8866-f629-4585-bcf2-f4f9fe7b8eae","type":"go","to_node_id":"5aaae02b513aa028ccdbde42","chTime":1521484181907}],"semaphors":[]},"title":"Self-replication failure","description":"","x":1128,"y":840,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0017282ba963c28c478f9","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"5c5d72f0-d32b-41fc-b0c8-9d19a3447293","exception_reason":"Timeout failure"},{"id":"77fe6eab-e27d-4fc5-92b2-352db9b4ad4b","type":"go","to_node_id":"5ab0008c82ba963c28c3e4c9","chTime":1521484137676}],"semaphors":[]},"title":"Timeout failure","description":"","x":1120,"y":656,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0014a82ba963c28c45dbc","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"4dd11667-57d4-4ea7-b7dc-55555b4bdcfd","exception_reason":"Failed to save skype token"},{"id":"5e9050b7-367d-4203-bcc2-b37001aecac0","type":"go","to_node_id":"5ab0006e513aa028cc460ff3","chTime":1521484096233}],"semaphors":[]},"title":"Failed to save skype token","description":"","x":1116,"y":484,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab00118f6c3767dbdd2357c","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"ae9cd83a-f9ee-480c-9a52-6d80a568b913","exception_reason":"Failed to get skype token"},{"id":"36392dc1-37ef-4e83-9b2f-00a152348bbc","type":"go","to_node_id":"5aaaddbff6c3765f50df6bb9","chTime":1521484050318}],"semaphors":[]},"title":"Failed to get skype token","description":"","x":1112,"y":316,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaaddbff6c3765f50df6bb9","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1388,"y":344,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaae02b513aa028ccdbde41","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaae02b513aa028ccdbde3e","id":"20c9df35-91c2-4282-960c-1a4c2d8843a9"}]},"title":"","description":"","x":1044,"y":840,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab0008c82ba963c28c3e4c6","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ab0008c82ba963c28c3e4c7","extra":{"seconds_minus":"100","expires_in":"{{expires_in}}"},"extra_type":{"seconds_minus":"number","expires_in":"number"},"group":"","id":"b45d7105-f962-4071-aad8-1303e29b6131","conv_id":370762,"convTitle":"Timeout","user_id":56916},{"id":"61151383-b895-44f0-8dd8-415cabd329b7","type":"go","to_node_id":"5aaae02b513aa028ccdbde3e","chTime":1521484025033}],"semaphors":[]},"title":"Timeout","description":"","x":772,"y":656,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaae02b513aa028ccdbde3e","obj_type":0,"condition":{"logics":[{"type":"api_copy","mode":"create","data":{"copy":"ok"},"data_type":{"copy":"string"},"group":"","err_node_id":"5aaae02b513aa028ccdbde3f","id":"c6946324-77df-4345-b717-1b179cf170ed","conv_id":367763,"user_id":56916,"ref":"{{root.task_id}}","convTitle":"Skype - Update token"},{"id":"bb942412-df12-44bf-b85a-2aa191f3d2ed","type":"go","to_node_id":"5ab001a460e3275612c5bfc8","chTime":1521147954392}],"semaphors":[]},"title":"Self Update","description":"","x":772,"y":840,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5ab0008c82ba963c28c3e4c8","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ab0008c82ba963c28c3e4c6","id":"60217ed7-4904-4a30-a2f4-201318a2357b"}]},"title":"","description":"","x":1036,"y":664,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab0006e513aa028cc460ff1","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5ab0006e513aa028cc460fee","id":"7f06c08f-3efd-4c79-a6f4-3113c435ebc1"}]},"title":"","description":"","x":1024,"y":492,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5ab0006e513aa028cc460fee","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5ab0006e513aa028cc460fef","extra":{"corezoid_reference":"skype_token"},"extra_type":{"corezoid_reference":"string"},"group":"all","id":"6a34f22b-13b6-47e4-92c8-7d019ac76bda","conv_id":370761,"convTitle":"Credentials (Merge)","user_id":56916},{"id":"f9c6eb3b-4253-4055-83e5-a0b60b2d0059","type":"go","to_node_id":"5ab0008c82ba963c28c3e4c6","chTime":1521483943332}],"semaphors":[]},"title":"Save skype token","description":"","x":772,"y":492,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaadd0c60e3274302927988","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"skype_client_id":"{{conv[367769].ref[skype_credentials].skype_client_id}}","skype_client_secret":"{{conv[367769].ref[skype_credentials].skype_client_secret}}"},"extra_type":{"skype_client_id":"string","skype_client_secret":"string"},"err_node_id":"5ab0003260e3275612c4d578","id":"09fcd3e1-bf8b-494e-b1b4-1f48567a7fa3"},{"id":"e72d9072-27e1-41b6-a78e-b43e6ab31975","type":"go","to_node_id":"5aaaddbff6c3765f50df6bb4","chTime":1521147139053}],"semaphors":[]},"title":"","description":"","x":772,"y":176,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5aaaddbff6c3765f50df6bb5","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5aaaddbff6c3765f50df6bb8","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"eb076303-2748-4d12-8a56-492ae26fd1a3"},{"type":"go_if_const","to_node_id":"5ab00118f6c3767dbdd2357c","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"9c102be4-3956-4a00-9d75-371c02795020"},{"type":"go_if_const","to_node_id":"5aaaddbff6c3765f50df6bb8","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"593280fe-ec11-45e8-b219-bec422d98cee"},{"type":"go","to_node_id":"5ab00118f6c3767dbdd2357c","id":"a2132792-ce68-4178-b97a-3607170ceb96"}],"semaphors":[]},"title":"","description":"","x":1024,"y":396,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaaddbff6c3765f50df6bb8","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5aaaddbff6c3765f50df6bb4","id":"fd43c664-abc9-434b-b033-5ec4967d1e43"}]},"title":"","description":"","x":1024,"y":320,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaae02b513aa028ccdbde42","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Copy in self: Other Errors","description":"","x":1404,"y":868,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5aaadc86f6c3765f50def75a","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5aaadd0c60e3274302927988","id":"171205c4-194a-4c01-aa00-4ed8e52bd604"}],"semaphors":[]},"title":"Start","description":"","x":872,"y":100,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5aaadc86f6c3765f50def75b","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":872,"y":1164,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":199283,"parent_id":199282,"title":"Skype","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":409524,"parent_id":199285,"title":"Facebook - Send message","description":"","status":"active","params":[{"name":"ChatId","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"Text","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5add7f0f60e3277ba8d4dd20","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true","Type":"","Date":"$.unixtime()","MessageId":"{{message_id}}"},"res_data_type":{"success":"boolean","Type":"string","Date":"string","MessageId":"string"},"mode":"key_value","throw_exception":false,"id":"31d0ce1b-4c81-4936-bb0c-d8d918d1d862"},{"id":"e1bcca59-952d-4a5c-b732-46a8ef784163","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd23","chTime":1521152110246}],"semaphors":[]},"title":"","description":"","x":776,"y":364,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd21","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Facebook Token: Other Errors","description":"","x":1324,"y":32,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5add7f0f60e3277ba8d4dd19","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"d7b3a81e-70b1-4945-a5cd-be7882fb8f96","exception_reason":"Cannot set facebook token"},{"id":"b8a1cc65-8b2c-46e1-a1a1-2cbcf964dab4","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd21","chTime":1521178893026}],"semaphors":[]},"title":"","description":"","x":1056,"y":4,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd1f","obj_type":0,"condition":{"logics":[{"type":"api","err_node_id":"5add7f0f60e3277ba8d4dd13","format":"","method":"POST","url":"https://graph.facebook.com/v2.6/me/messages?access_token={{token}}","extra":{"recipient":"{\"id\":\"{{ChatId}}\"}","message":"{\"text\":\"{{Text}}\"}"},"extra_type":{"recipient":"string","message":"string"},"max_threads":5,"debug_info":false,"customize_response":false,"response":{"header":"{{header}}","body":"{{body}}"},"response_type":{"header":"object","body":"object"},"extra_headers":{"Authorization":"Bearer {{token}}"},"send_sys":false,"cert_pem":"","content_type":"application/json","id":"bd217cfb-03bd-4032-9e19-07a47aae19b0","is_migrate":true},{"id":"2d22ddb0-1d4a-47c7-b0e8-44f713c12fbf","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd20","chTime":1521150310420}],"semaphors":[]},"title":"Send message","description":"","x":776,"y":184,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd17","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"token":"{{conv[367769].ref[facebook_token].fb_access_token}}"},"extra_type":{"token":"string"},"err_node_id":"5add7f0f60e3277ba8d4dd19","id":"cdcf54bd-16b3-4cb0-b75d-925a80f6c655"},{"id":"df7389c0-92ea-4280-a43d-6b42c9bcb379","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd1f","chTime":1521151261018}],"semaphors":[]},"title":"Get skype token","description":"","x":776,"y":8,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd13","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5add7f0f60e3277ba8d4dd1d","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_api_return_type_error__","cast":"string"}],"id":"f8dc218a-139c-4442-b35a-2c0e5e530c95"},{"type":"go_if_const","to_node_id":"5add7f0f60e3277ba8d4dd1b","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"},{"fun":"eq","const":"no_scheme","param":"__conveyor_api_return_description__","cast":"string"}],"id":"b66d8dd2-6e6a-4483-bfc8-d043d14d8122","chTime":1521179571918},{"type":"go_if_const","to_node_id":"5add7f0f60e3277ba8d4dd1d","conditions":[{"fun":"eq","const":"software","param":"__conveyor_api_return_type_error__","cast":"string"},{"fun":"eq","const":"api_bad_answer","param":"__conveyor_api_return_type_tag__","cast":"string"}],"id":"c2d01ebf-8d62-4878-a471-5e8da2cb22f5"},{"id":"199a6846-7aa8-485a-8aac-c2fd8aa38494","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd1b","chTime":1521179575813}],"semaphors":[]},"title":"","description":"","x":1028,"y":284,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd1b","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false","message":"{{message}}"},"res_data_type":{"success":"boolean","message":"string"},"mode":"key_value","throw_exception":true,"id":"bc6c0c53-5973-44fc-9581-e7077dbbec38"},{"id":"32263f6a-401f-4ace-bd7f-e4b0be6bf2ad","type":"go","to_node_id":"5add7f0f60e3277ba8d4dd24","chTime":1521179581016}],"semaphors":[]},"title":"","description":"","x":1116,"y":180,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd1d","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5add7f0f60e3277ba8d4dd1f","id":"0db167cd-4c18-4667-91e5-d4011e2b7963"}]},"title":"","description":"","x":1028,"y":184,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd27","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5add7f0f60e3277ba8d4dd17","id":"eae789ec-2317-49f8-beb7-68568163db29"}],"semaphors":[]},"title":"Start","description":"","x":876,"y":-92,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5add7f0f60e3277ba8d4dd24","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Facebook message: Other Errors","description":"","x":1400,"y":208,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5add7f0f60e3277ba8d4dd23","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":876,"y":508,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":1,"obj_id":409523,"parent_id":199285,"title":"Facebook - Update token","description":"","status":"active","params":[{"name":"fb_access_token","type":"string","descr":"","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5add7caa60e3277ba8d2e1fb","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5add7caa60e3277ba8d2e1dd","extra":{"corezoid_reference":"facebook_token"},"extra_type":{"corezoid_reference":"string"},"group":"all","id":"6a34f22b-13b6-47e4-92c8-7d019ac76bda","conv_id":370761,"convTitle":"Credentials (Merge)","user_id":56916},{"id":"ad2ccfb5-53fe-460a-9bfa-f280c4a277ae","type":"go","to_node_id":"5add7caa60e3277ba8d2e1e9","chTime":1524465170463}],"semaphors":[]},"title":"Save facebook token","description":"","x":772,"y":492,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7caa60e3277ba8d2e1e9","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":false,"id":"f0245ba4-8cc9-45ee-939e-8078286f3d43"},{"id":"0620c733-4ba7-40c2-a99b-7f948024b6ed","type":"go","to_node_id":"5add7caa60e3277ba8d2e207","chTime":1521484192137}],"semaphors":[]},"title":"Successfully updated","description":"","x":772,"y":672,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7caa60e3277ba8d2e1f0","obj_type":0,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"false"},"res_data_type":{"success":"boolean"},"mode":"key_value","throw_exception":true,"id":"4dd11667-57d4-4ea7-b7dc-55555b4bdcfd","exception_reason":"Failed to save skype token"},{"id":"5e9050b7-367d-4203-bcc2-b37001aecac0","type":"go","to_node_id":"5add7caa60e3277ba8d2e1e4","chTime":1521484096233}],"semaphors":[]},"title":"Failed to save facebook token","description":"","x":1116,"y":484,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5add7caa60e3277ba8d2e1dd","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5add7caa60e3277ba8d2e1f9","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"c04b91c9-48d6-435e-883c-1d01cd683921"},{"type":"go_if_const","to_node_id":"5add7caa60e3277ba8d2e1f9","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"b52cceb1-7770-4c88-a179-471637fafa3c"},{"type":"go_if_const","to_node_id":"5add7caa60e3277ba8d2e1f0","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"24e98fe1-3a74-479c-959e-7f9d7957aa28"},{"type":"go_if_const","to_node_id":"5add7caa60e3277ba8d2e1f0","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"030e4814-d7af-418e-b32e-b9b8daf45006"},{"type":"go","to_node_id":"5add7caa60e3277ba8d2e1f0","id":"d0dba6c5-641c-4332-8ff5-20ce9a68e6c2"}],"semaphors":[]},"title":"","description":"","x":1024,"y":580,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5add7caa60e3277ba8d2e1e4","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Process: Other Errors","description":"","x":1388,"y":512,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5add7caa60e3277ba8d2e207","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":872,"y":856,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"},{"id":"5add7caa60e3277ba8d2e205","obj_type":1,"condition":{"logics":[{"id":"ccdfb05f-2fa6-4971-bd98-0e3e5a7109c1","type":"go","to_node_id":"5add7caa60e3277ba8d2e1fb","chTime":1524465208898}],"semaphors":[]},"title":"Start","description":"","x":872,"y":412,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5add7caa60e3277ba8d2e1f9","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5add7caa60e3277ba8d2e1fb","id":"7f06c08f-3efd-4c79-a6f4-3113c435ebc1"}]},"title":"","description":"","x":1024,"y":492,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":199285,"parent_id":199282,"title":"Messenger","description":"","company_id":"i16504022545"},{"obj_type":1,"obj_id":415637,"parent_id":199282,"title":"Client roles (Роли клиента)","description":"Возвращает назначенные роли клиента в компании","status":"active","params":[{"name":"routing_key","type":"string","descr":"Ключ маршрутизации RabbitMQ","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"type","type":"string","descr":"Ключ маршрутизации FoxyLink","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"UserId","type":"string","descr":"Идентификатор пользователя","flags":["required","input"],"regex":"","regex_error_text":""},{"name":"ChatId","type":"string","descr":"Идентификатор чата","flags":["required","input"],"regex":"","regex_error_text":""}],"ref_mask":true,"conv_type":"process","scheme":{"nodes":[{"id":"5af421f760e3271d23cb00e4","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af421f760e3271d23cb00e5","extra":{"correlation_id":"{{TaskId}}","payload":"{{payload}}","reply_to":"/api/1/json/callback/5af425fa60e3271d23ce46ec/98b2648e9d92260f11191b389e0adc76090453dc","routing_key":"{{routing_key}}","type":"{{type}}"},"extra_type":{"correlation_id":"string","payload":"string","reply_to":"string","routing_key":"string","type":"string"},"group":"","id":"51662b4e-e792-46ad-9dd3-75cd27cc989a","conv_id":367561,"user_id":56916},{"id":"2c7d92ae-5c65-46eb-a892-7a411d58cdd2","type":"go","to_node_id":"5af425fa60e3271d23ce46ec","chTime":1525949959503}],"semaphors":[]},"title":"Послать запрос на проверку клиента","description":"","x":780,"y":528,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4514ff6c37674c902f16e","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af4514ff6c37674c902f16f","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"1dd98cef-b6ce-4d81-8535-cce08668edd9"},{"type":"go_if_const","to_node_id":"5af4514ff6c37674c902f16f","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"5b57eb23-0b8b-416d-80f3-6ed2e2fd4286"},{"type":"go_if_const","to_node_id":"5af4215a82ba9606c4996153","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"4fb3061b-84a4-4a67-b25b-0e56aa39955e","chTime":1525961288856},{"type":"go_if_const","to_node_id":"5af4215a82ba9606c4996153","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"fd568cbf-c870-4fcc-b9c9-bd51516be18e","chTime":1525961291704},{"id":"b77d90e4-81c0-4ede-beb2-8f7f8bda9198","type":"go","to_node_id":"5af4215a82ba9606c4996153","chTime":1525961290244}],"semaphors":[]},"title":"","description":"","x":1284,"y":140,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af425fa60e3271d23ce46ec","obj_type":0,"condition":{"logics":[{"type":"api_callback","is_sync":true,"id":"5e18b6f3-1d7e-4e85-8d69-8a1424bb698b","obj_id_path":"TaskId"},{"id":"67500348-5b13-4d29-9926-7eadf7990938","type":"go","to_node_id":"5af4514ff6c37674c902f16c","chTime":1525961257330}],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af4215a82ba9606c4996153","id":"ed29a9f7-5157-4774-929d-ece0b295f4be","chTime":1525961094826}]},"title":"Ожидание ответа от FoxyLink","description":"","x":780,"y":748,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4514ff6c37674c902f16c","obj_type":0,"condition":{"logics":[{"type":"api_rpc","err_node_id":"5af4514ff6c37674c902f16e","extra":{"ChatId":"{{ChatId}}","UserId":"{{UserId}}","Partner":"{{Partner}}"},"extra_type":{"ChatId":"string","UserId":"string","Partner":"string"},"group":"","id":"4829aa1a-a238-4bed-852e-4c09d0a9b2c5","conv_id":415673,"user_id":56916},{"id":"b373ef47-0f97-42a6-8d2f-07ebad049437","type":"go","to_node_id":"5af4215a82ba9606c4996153","chTime":1525961164268}],"semaphors":[]},"title":"Обновить сессию клиента","description":"","x":1024,"y":16,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4514ff6c37674c902f16f","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af4514ff6c37674c902f16c","id":"a4842483-bde1-4ac5-852b-3b50b14fad93"}]},"title":"","description":"","x":1284,"y":60,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af4215a82ba9606c4996153","obj_type":3,"condition":{"logics":[{"type":"api_rpc_reply","res_data":{"success":"true","Partner":"{{Partner}}"},"res_data_type":{"success":"boolean","Partner":"string"},"mode":"key_value","throw_exception":false,"id":"0636364c-0ca7-49d0-bc45-39eb2963826e"},{"id":"45e2992f-2ee8-4173-9550-f94af44c6035","type":"go","to_node_id":"5af420ef82ba9606c49905e8","chTime":1525948770216}],"semaphors":[]},"title":"Возвращаемся в родительский процесс","description":"","x":1212,"y":312,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af45079513aa0242d11433b","obj_type":0,"condition":{"logics":[{"to_node_id":"5af4514ff6c37674c902f16c","type":"go_if_const","id":"8a7f85ed-9fb3-492f-93f8-47e881fa8c0e","conditions":[{"param":"Partner","const":"","fun":"not_eq","cast":"string"}],"chTime":1525961161865},{"id":"d03e19dc-eea5-4a92-9f6f-5665599f3a03","type":"go","to_node_id":"5af4210960e3271d23ca36fb","chTime":1525960854459}],"semaphors":[]},"title":"Сессия существует","description":"","x":776,"y":-4,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af44fe5513aa0242d10d178","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"","description":"","x":712,"y":-84,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"error\"}"},{"id":"5af44fe5513aa0242d10d174","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"Partner":"{{conv[415672].ref[{{ChatId}}_{{UserId}}].Partner}}"},"extra_type":{"Partner":"string"},"err_node_id":"5af44fe5513aa0242d10d178","id":"89310762-1961-4752-ab8a-c2bdcb009ce7"},{"id":"eaf6fc79-06f2-44da-87db-3e1e50c8dc30","type":"go","to_node_id":"5af45079513aa0242d11433b","chTime":1525960677653}],"semaphors":[]},"title":"Получить активную сессию партнера","description":"","x":776,"y":-192,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af4210960e3271d23ca36fb","obj_type":0,"condition":{"logics":[{"type":"set_param","extra":{"TaskId":"{{root.task_id}}"},"extra_type":{"TaskId":"string"},"err_node_id":"5af4215a82ba9606c4996153","id":"f7c8f1d9-aa22-4ade-8e67-6f2cbe292353"},{"id":"ff226c95-5107-40d9-ac23-9318e09d9332","type":"go","to_node_id":"5af421a6f6c37674c9d9b926","chTime":1525948860446}],"semaphors":[]},"title":"Устанавливаем ссылку на текущий процесс","description":"","x":776,"y":156,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af421f760e3271d23cb00e5","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af421f760e3271d23cb00e7","conditions":[{"fun":"eq","const":"crash_api","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"362e58d3-9eec-48e1-b3ed-943e68ae16da"},{"type":"go_if_const","to_node_id":"5af421f760e3271d23cb00e7","conditions":[{"fun":"eq","const":"rpc_task_fatal_error","param":"__conveyor_rpc_return_type_tag__","cast":"string"}],"id":"83d91782-7dbd-4a1a-84a2-dd93833459b4"},{"type":"go_if_const","to_node_id":"5af4215a82ba9606c4996153","conditions":[{"fun":"eq","const":"access_denied","param":"__conveyor_copy_task_result__","cast":"string"}],"id":"3ba28ca1-0c94-4bfb-a656-25f851f409cf","chTime":1525948949608},{"type":"go_if_const","to_node_id":"5af4215a82ba9606c4996153","conditions":[{"fun":"eq","const":"rpc_reply_exception","param":"__conveyor_rpc_reply_return_type_tag__","cast":"string"}],"id":"f9c7b6b4-f8de-4ea3-a725-fe47044981bc","chTime":1525948951530},{"id":"079a4d44-ddc9-4edb-afbb-42b52a5e2dea","type":"go","to_node_id":"5af4215a82ba9606c4996153","chTime":1525948953648}],"semaphors":[]},"title":"","description":"","x":1028,"y":624,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af421f760e3271d23cb00e7","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af421f760e3271d23cb00e4","id":"ee86ddf8-c459-4aff-952f-d00fc816868e"}]},"title":"","description":"","x":1028,"y":524,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af421a6f6c37674c9d9b926","obj_type":0,"condition":{"logics":[{"src":"var Settings = {};\nSettings.UserId = data.UserId;\nSettings.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Settings = Settings;\ndata.payload = payload;","lang":"js","type":"api_code","err_node_id":"5af421a6f6c37674c9d9b929","id":"12daf271-cc66-453a-a2fb-2961593f873d","lang":"js","src":"var Settings = {};\nSettings.UserId = data.UserId;\nSettings.TaskId = data.TaskId;\n\nvar payload = {};\npayload.Settings = Settings;\ndata.payload = payload;"},{"id":"c6b156b2-ff47-4b64-991e-889a5dac977f","type":"go","to_node_id":"5af421f760e3271d23cb00e4","chTime":1525948937752}],"semaphors":[]},"title":"Создаем тело сообщения","description":"","x":776,"y":340,"extra":"{\"modeForm\":\"expand\",\"icon\":\"\"}"},{"id":"5af421a6f6c37674c9d9b929","obj_type":3,"condition":{"logics":[{"type":"go_if_const","to_node_id":"5af421a6f6c37674c9d9b92a","conditions":[{"fun":"eq","const":"hardware","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"1e0d31f5-e7ba-4f18-8524-5521dc777e07"},{"type":"go_if_const","to_node_id":"5af4215a82ba9606c4996153","conditions":[{"fun":"eq","const":"software","param":"__conveyor_code_return_type_error__","cast":"string"}],"id":"0f515330-e434-4ce5-be3e-7fa8ac954a04","chTime":1525948851592},{"id":"20084080-35c6-4896-b664-103901b0cbdb","type":"go","to_node_id":"5af4215a82ba9606c4996153","chTime":1525948853380}],"semaphors":[]},"title":"","description":"","x":1024,"y":428,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af421a6f6c37674c9d9b92a","obj_type":0,"condition":{"logics":[],"semaphors":[{"type":"time","value":30,"dimension":"sec","to_node_id":"5af421a6f6c37674c9d9b926","id":"a50f3092-616c-4338-81fc-28a034a99986"}]},"title":"","description":"","x":1024,"y":340,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af420ef82ba9606c49905e5","obj_type":1,"condition":{"logics":[{"type":"go","to_node_id":"5af44fe5513aa0242d10d174","id":"c9efb624-edf8-4fee-a401-acc018af52ee"}],"semaphors":[]},"title":"Start","description":"","x":876,"y":-252,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"\"}"},{"id":"5af420ef82ba9606c49905e8","obj_type":2,"condition":{"logics":[],"semaphors":[]},"title":"Final","description":"","x":1484,"y":340,"extra":"{\"modeForm\":\"collapse\",\"icon\":\"success\"}"}],"web_settings":[[],[]]},"company_id":"i16504022545","conv_type":"process"},{"obj_type":0,"obj_id":199282,"parent_id":0,"title":"FoxyLink (Bot system)","description":"","company_id":"i16504022545"}]